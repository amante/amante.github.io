
ACC.myCompanyNavigation={_autoload:["myCompanyNavigation"],myCompanyNavigation:function(){var aCompData=[];var oMyCompanyData=$('.companyNavComponent');var oMMainNavDesktopCom=$(".js-secondaryNavCompany .js-nav__links");if(oMyCompanyData){var cLinks=oMyCompanyData.find("a");for(var i=0;i<cLinks.length;i++){aCompData.push({link:cLinks[i].href,text:cLinks[i].title});}}
var oUserInfo=$(".js-logged_in");if(oUserInfo&&oUserInfo.length===1&&oMyCompanyData.length>0)
{var myCompanyHook=$('<a class=\"myCompanyLinksHeader collapsed js-myCompany-toggle\"  data-toggle=\"collapse\" data-parent=".nav__right" href=\"#accNavComponentDesktopTwo\">'+oMyCompanyData.data("title")+'</a>');myCompanyHook.insertBefore(oMyCompanyData);$('.js-userAccount-Links').append($('<li class="auto"><div class="myCompanyLinksContainer js-myCompanyLinksContainer"></div></li>'));var myCompanyHook=[];myCompanyHook.push('<div class="sub-nav">')
myCompanyHook.push('<a id="signedInCompanyToggle" class="myCompanyLinksHeader collapsed js-myCompany-toggle"  data-toggle="collapse" data-target=".offcanvasGroup3">');myCompanyHook.push(oMyCompanyData.data("title"));myCompanyHook.push('<span class="glyphicon glyphicon-chevron-down myCompanyExp"></span>');myCompanyHook.push('</a>');myCompanyHook.push('</div>');$('.js-myCompanyLinksContainer').append(myCompanyHook.join(''));$('.js-myCompanyLinksContainer').append($('<ul data-trigger="#signedInCompanyToggle" class="js-myCompany-root offcanvasGroup3 offcanvasNoBorder subNavList js-nav-collapse-body  collapse sub-nav "></ul>'));for(var i=aCompData.length-1;i>=0;i--){var oLink=oDoc.createElement("a");oLink.title=aCompData[i].text;oLink.href=aCompData[i].link;oLink.innerHTML=aCompData[i].text;var oListItem=oDoc.createElement("li");oListItem.appendChild(oLink);oListItem=$(oListItem);oListItem.addClass("auto ");$('.js-myCompany-root').append(oListItem);}}
for(var i=0;i<aCompData.length;i++){var oLink=oDoc.createElement("a");oLink.title=aCompData[i].text;oLink.href=aCompData[i].link;oLink.innerHTML=aCompData[i].text;var oListItem=oDoc.createElement("li");oListItem.appendChild(oLink);oListItem=$(oListItem);oListItem.addClass("auto col-md-4");oMMainNavDesktopCom.get(0).appendChild(oListItem.get(0));}
$('.js-secondaryNavAccount').on('shown.bs.collapse',function(){if($('.js-secondaryNavCompany').hasClass('in')){$('.js-myCompany-toggle').click();}});$('.js-secondaryNavCompany').on('shown.bs.collapse',function(){if($('.accNavComponentAccount').hasClass('in')){$('.js-myAccount-toggle').click();}});}};ACC.commerceorg={_autoload:["bindToSelectBudget","bindToDeselectBudget","bindToSelectLink","bindToDeselectLink","bindToActionConfirmationModalWindow","disablePermissionConfirmation","bindToSelectUser","bindToDeselectUser","bindToUnitAddUserButton","disablePermissionConfirmation","bindPermissionTypeSelectionForAddNew","bindToRemoveUserFromUnit","budgetFormInit"],bindToSelectBudget:function()
{$(document).on('click','.js-selectBudget',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.selectionCallback);return false;});},bindToDeselectBudget:function()
{$(document).on('click','.js-deselectBudget',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.deselectionCallback);return false;});},selectionCallback:function(budget)
{$('#card-'+budget.normalizedCode).addClass("selected");$('#span-'+budget.normalizedCode).html($('#enableDisableLinksTemplate').tmpl(budget));},deselectionCallback:function(budget)
{$('#card-'+budget.normalizedCode).removeClass("selected");$('#span-'+budget.normalizedCode).html($('#enableDisableLinksTemplate').tmpl(budget));},disablePermissionConfirmation:function(data)
{$(document).on("click",".js-disable-permission-confirmation",function(e){e.preventDefault();ACC.colorbox.open("",{inline:true,href:"#disablePermission",width:"620px",onComplete:function(){$(this).colorbox.resize();}});});$(document).on("click",'#disablePermission #cancelDisablePermission',function(e){e.preventDefault();$.colorbox.close();});},bindPermissionTypeSelectionForAddNew:function()
{$('#selectNewPermissionType').on("change",function(e)
{$.ajax({url:ACC.config.encodedContextPath+'/my-company/organization-management/manage-permissions/getNewPermissionForm',async:true,data:{'permissionType':$(this).val()},dataType:"html",beforeSend:function()
{$("#addNewPermissionForm").html(ACC.address.spinner);}}).done(function(data)
{$("#addNewPermissionForm").html($(data).html());ACC.commerceorg.bindPermissionTypeSelectionForAddNew();});})},bindToSelectUser:function()
{$(document).on('click','.js-selectUser',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.userSelectionCallback);return false;});},bindToDeselectUser:function()
{$(document).on('click','.js-deselectUser',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.userSelectionCallback);return false;});},bindToRemoveUserFromUnit:function()
{$(document).on('click','.js-remove-user-from-unit',function(){var removeUserFromUnit=$(this).parents('.card');var counterElem=$(this).parents('.account-cards').prev('.account-list-header').find('.counter');$.postJSON(this.getAttribute('url'),{},function(){removeUserFromUnit.remove();counterElem.text(counterElem.text()-1);});return false;});},userSelectionCallback:function(user)
{var userNormalizedId=typeof user.normalizedUid!='undefined'?user.normalizedUid:user.normalizedCode;$('#selection-'+userNormalizedId).html($('#enableDisableLinksTemplate').tmpl(user));$('#roles-'+userNormalizedId).html($('#userRolesTemplate').tmpl(user));if(user.selected)
{$('#row-'+userNormalizedId).addClass("selected");}
else
{$('#row-'+userNormalizedId).removeClass("selected");}},bindToSelectLink:function()
{$(document).on('click','.js-selectLink',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.selectionCallbackLink);return false;});},bindToDeselectLink:function()
{$(document).on('click','.js-deselectLink',function(){var url=$(this).attr('url');$.postJSON(url,{},ACC.commerceorg.deselectionCallbackLink);return false;});},selectionCallbackLink:function(permission)
{$('#row-'+permission.normalizedCode).addClass("selected");$('#span-'+permission.normalizedCode).html($('#enableDisableLinksTemplate').tmpl(permission));},deselectionCallbackLink:function(permission)
{$('#row-'+permission.normalizedCode).removeClass("selected");$('#span-'+permission.normalizedCode).html($('#enableDisableLinksTemplate').tmpl(permission));},bindToActionConfirmationModalWindow:function()
{$('.js-action-confirmation-modal a').click(function(e){e.preventDefault();var title=$(this).data('action-confirmation-modal-title');var id=$(this).data('action-confirmation-modal-id');var modalWindow=$('#js-action-confirmation-modal-content-'+id);if(modalWindow.data('useSourceElementUrl')===true){var url=$(this).prop('href');modalWindow.find('.url-holder').each(function(index,element){var target=$(element);if(target.is("form")){target.prop('action',url);}else{target.prop('href',url);}});}
ACC.colorbox.open(title,{inline:true,href:modalWindow,width:"480px",onComplete:function(){ACC.colorbox.resize();}});});$('.js-action-confirmation-modal-cancel').click(function(e){e.preventDefault();ACC.colorbox.close();});},bindToUnitAddUserButton:function()
{$('.js-add-user-action').click(function(e){$(this).parent('.add-user-action-menu').toggleClass('open');return false;});},budgetFormInit:function()
{var dateFormatForDatePicker=$('#editB2bBudgetform').data("dateFormatForDatePicker");$("#budgetStartDate").datepicker({dateFormat:dateFormatForDatePicker});$(document).on("click",'#editB2bBudgetform .js-open-datepicker-budgetStartDate',function(){$("#budgetStartDate").datepicker('show');});$("#budgetEndDate").datepicker({dateFormat:dateFormatForDatePicker});$(document).on("click",'#editB2bBudgetform .js-open-datepicker-budgetEndDate',function(){$("#budgetEndDate").datepicker('show');});$('#editB2bBudgetform').validate({rules:{startDate:{required:true},endDate:{required:true}}})}};(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.");}
return;}
var validator=$.data(this[0],"validator");if(validator){return validator;}
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target;}
if($(event.target).hasClass("cancel")){validator.cancelSubmit=true;}});this.submit(function(event){if(validator.settings.debug){event.preventDefault();}
function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is("form")){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}
break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!==Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n;});});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}
this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element,event){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return;}else if(element.name in this.submitted||element===this.lastElement){this.element(element);}},onclick:function(element,event){if(element.name in this.submitted){this.element(element);}
else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/);}
$.each(value,function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");if(validator.settings[eventType]){validator.settings[eventType].call(validator,this[0],event);}}
$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}
this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element)!==false;if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}
this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue");},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj){count++;}
return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}
if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false;}
rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();if(type==="radio"||type==="checkbox"){return $("input[name='"+$(element).attr("name")+"']:checked").val();}
if(typeof val==="string"){return val.replace(/\r/g,"");}
return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;var val=this.elementValue(element);var result;for(var method in rules){var rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occured when checking element "+element.id+", check the '"+rule.method+"' method.",e);}
throw e;}}
if(dependencyMismatch){return;}
if(this.objectLength(rules)){this.successList.push(element);}
return true;},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||(element.attributes&&$(element).attr("data-msg-"+method.toLowerCase()));},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}
return toToggle;},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}
this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);label.html(message);}else{label=$("<"+this.settings.errorElement+">").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length){if(this.settings.errorPlacement){this.settings.errorPlacement(label,$(element));}else{label.insertAfter(element);}}}
if(!message&&this.settings.success){label.text("");if(typeof this.settings.success==="string"){label.addClass(this.settings.success);}else{this.settings.success(label,element);}}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
return element;},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']");},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}
delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={};var classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}
return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value;if(method==="required"){value=$element.get(0).getAttribute(method);if(value===""){value=true;}
value=!!value;}else{value=$element.attr(method);}
if(value){rules[method]=value;}else if($element[0].getAttribute("type")===method){rules[method]=true;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule-"+method.toLowerCase());if(value!==undefined){rules[method]=value;}}
return rules;},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength'],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}else if(typeof rules[this]==="string"){parts=rules[this].split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])];}}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}
if(this.checkable(element)){return this.getLength(value,element)>0;}
return $.trim(value).length>0;},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch";}
var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}
previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true||response==="true";if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString());},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}
if(/[^0-9 \-]+/.test(value)){return false;}
var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)===0;},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});}
return value===target.val();}}});$.format=$.validator.format;}(jQuery));(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}}(jQuery));(function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});}(jQuery));ACC.accountsummary={_autoload:["backAccountSummaryUnit","filterByCriteria"],defaultFilterByKey:"documentNumber",filterByKey:$('#filterByKey').data("filterByKey"),startRange:$('#rangeCriteria').data("startRange"),endRange:$('#rangeCriteria').data("endRange"),documentTypeCode:$('#documentTypeCriteria').data("documentTypeCode"),filterByValue:$('#singleValueCriteria').data("filterByValue"),backAccountSummaryUnit:function(){$(".accountSummaryUnitBackBtn, .accountSummaryUnitTopBackBtn").on("click",function(){var sUrl=$(this).data("backToAccountSummary");window.location=sUrl;});},filterByCriteria:function(){$(document).on("change","select#filterByKey",function(){ACC.accountsummary.defaultFilterByKey=$(this).find("option:selected").attr('id');ACC.accountsummary.addRemoveDatePickerClass();ACC.accountsummary.cleanFilterKeyFields();ACC.accountsummary.showHideFilterKey();if(ACC.accountsummary.filterByKey===ACC.accountsummary.defaultFilterByKey){if(ACC.accountsummary.filterByKey==="documentType"){$("#typeCriteria").val(ACC.accountsummary.documentTypeCode);}
else if(ACC.accountsummary.defaultFilterByKey.match(/range/i)){$("#startRange").val(ACC.accountsummary.startRange);$("#endRange").val(ACC.accountsummary.endRange);}
else{$("#filterByValue").val(ACC.accountsummary.filterByValue);}}
else{ACC.accountsummary.cleanFilterKeyFields();}});},addRemoveDatePickerClass:function(){if(ACC.accountsummary.defaultFilterByKey.match(/date/i)){var dateForDatePicker=$('#rangeCriteria').data("dateForDatePicker");$("i").addClass("glyphicon glyphicon-calendar js-open-datepicker");$(document).on("click",'#startRangeCriteria .js-open-datepicker',function(){$('#startRangeCriteria .hasDatepicker').datepicker('show');});$(document).on("click",'#endRangeCriteria .js-open-datepicker',function(){$('#endRangeCriteria .hasDatepicker').datepicker('show');});$("#startRange, #endRange").datepicker({dateFormat:dateForDatePicker});}
else{$("i").removeClass("glyphicon glyphicon-calendar js-open-datepicker");$("#startRange, #endRange").datepicker("destroy");}},showHideFilterKey:function(){$('.criterias').hide();if(ACC.accountsummary.defaultFilterByKey==="documentType"){$('.documentTypeCriteria').show();}
else if(ACC.accountsummary.defaultFilterByKey.match(/range/i)){$('.rangeCriteria').show();}
else{$('.singleValueCriteria').show();}},cleanFilterKeyFields:function(){$('.filterCriteria').val('');}};$(document).ready(function(){ACC.accountsummary.defaultFilterByKey=$("#filterByKey").find("option:selected").attr('id');if(ACC.accountsummary.defaultFilterByKey!==undefined){ACC.accountsummary.showHideFilterKey();ACC.accountsummary.addRemoveDatePickerClass();}});ACC.paymentType={_autoload:["bindPaymentTypeSelect","showHideCostCenterSelect"],bindPaymentTypeSelect:function()
{$("input:radio[name='paymentType']").change(function()
{ACC.paymentType.showHideCostCenterSelect();});},showHideCostCenterSelect:function(){var paymentTypeSelected=$("input:radio[name='paymentType']:checked").val();if(paymentTypeSelected=="ACCOUNT"){$("#costCenter").show();}else{$("#costCenter").hide();}}};ACC.replenishment={_autoload:["bindToCancelReplenishmentOrderActionButton","bindToCancelReplenishmentOrderCancelButton"],bindToCancelReplenishmentOrderActionButton:function()
{$(document).on("click",'.js-replenishment-cancel-button',ACC.replenishment.handleCancelReplenishmentOrderButtonClick);},bindToCancelReplenishmentOrderCancelButton:function()
{$(document).on("click",'.js-replenishment-order-cancel-modal-cancel-button',ACC.replenishment.handleCancelReplenishmentOrderCancelButtonClick);},handleCancelReplenishmentOrderButtonClick:function(){var replenishmentNumber=$(this).data('job-code');var popupTitle=ACC.common.encodeHtml($(this).data('popup-title'));ACC.colorbox.open(popupTitle,{inline:true,className:"replenishment-order-cancel-modal",href:"#popup_confirm_replenishment_order_cancellation_"+replenishmentNumber,width:'435px',onComplete:function()
{$(this).colorbox.resize();}});},handleCancelReplenishmentOrderCancelButtonClick:function(){ACC.colorbox.close();}};var ACC=ACC||{};if($("#orderFormContainer").length>0){ACC.orderform={_autoload:["bindAll"],$selectedProductIdsContainer:$("#js-selected-product-ids"),$productIdsInput:$("#js-product-ids"),$enableProductIdsCheckBox:$("#js-enable-product-ids"),$productIdTagBoxTemplate:$("#product-id-tag-box-template"),$removeProductIdButton:$(".js-remove-product-id"),$advSearchButton:$(".adv_search_button"),$orderFormToggle:$(".js-show-order-form-grid-wrapper"),$searchCurrentLabel:$(".searchInput label"),$createOrderFormButton:$(".js-create-order-form-button"),$createOrderFormCheckbox:$(".js-checkbox-sku-id, .js-checkbox-base-product"),$baseProductCheckBox:$(".js-checkbox-base-product"),$skuIDCheckbox:$(".js-checkbox-sku-id"),$skuQuantityOrderInput:$(".sku-quantity"),$addToCartBtn:$('#js-add-to-cart-order-form-btn-top, #js-add-to-cart-order-form-btn-bottom'),$orderForm:$("#isCreateOrderForm"),$userQtyInputSelection:$("input[data-product-selection]"),$totalPrice:$('.js-total-price'),$totalItemsCount:$('.js-total-items-count'),$totalPriceValue:$('.js-total-price-value'),$advancedSearchForm:$('#advancedSearchForm'),bindAll:function(){ACC.orderform.bindToToggleProductIds(ACC.orderform.$enableProductIdsCheckBox);ACC.orderform.bindToRemoveProductId(ACC.orderform.$removeProductIdButton);ACC.orderform.bindToAdvSearchButton(ACC.orderform.$advSearchButton);ACC.orderform.bindOrderFormToggle(ACC.orderform.$orderFormToggle);ACC.orderform.bindToCreateOrderFormButton(ACC.orderform.$createOrderFormButton);ACC.orderform.bindToBaseProductCheckBox(ACC.orderform.$baseProductCheckBox);ACC.orderform.bindToSkuIDCheckBox(ACC.orderform.$skuIDCheckbox);ACC.orderform.bindAddToCartClick(ACC.orderform.$addToCartBtn);if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){ACC.orderform.replaceSearchLabel(true);ACC.orderform.appendProductIdsForSearch();}
if($("#search-create-order-form").prop("checked")){ACC.orderform.makeUserSelectionAfterPagination();ACC.orderform.setStateOrderFormButton();}else{ACC.orderform.fillQuantityValueForPagination(ACC.orderform.$userQtyInputSelection);}
ACC.orderform.$advancedSearchForm.find("input[name='CSRFToken']").remove();},bindOrderFormToggle:function(orderFormToggle){orderFormToggle.click(function(event){var $this=$(this);$(this).toggleClass('open');var orderFormGridWrapper=$(this).parents('.js-item-list-item').next('.js-order-form-grid-wrapper');orderFormGridWrapper.slideToggle("slow",function(){if(!$this.data('calc')){var scrollingContent=orderFormGridWrapper.children('#cartOrderGridForm').addClass('visible');ACC.productorderform.coreTableScrollActions(scrollingContent);$this.data('calc',true);}});});},bindToAdvSearchButton:function(advSearchButton){advSearchButton.click(function(event){if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){if(ACC.orderform.$productIdsInput.val()!=""){ACC.orderform.appendProductIdsForSearch();}
ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());}
ACC.orderform.stripOutInvalidChars();if(ACC.orderform.$orderForm.val()){sessionStorage.clear();}else{ACC.orderform.cleanupQtyInputFromSessionStorage();}});},bindToCreateOrderFormButton:function(createOrderFormButton){createOrderFormButton.click(function(event){ACC.orderform.stripOutInvalidChars();ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$orderForm.val(true);sessionStorage.removeItem("checkedProducts");ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",false);ACC.orderform.$advSearchButton.click();});},bindToBaseProductCheckBox:function(baseProductCheckBox){baseProductCheckBox.click(function(event){var baseProduct=this;$(ACC.orderform.$skuIDCheckbox).each(function(){if($(this).attr("base-product-code")&&$(this).attr("base-product-code")==baseProduct.value){$(this).prop("checked",baseProduct.checked);ACC.orderform.addProductIdsToSessionStorage(this);}})});},bindToSkuIDCheckBox:function(skuIDCheckbox){skuIDCheckbox.click(function(event){ACC.orderform.addProductIdsToSessionStorage(this);});},addToSkuQtyInput:function(_this){if(ACC.orderform.$totalItemsCount.length!=0&&ACC.orderform.$totalItemsCount.text()==0){ACC.orderform.$addToCartBtn.attr('disabled','disabled');}else{ACC.orderform.$addToCartBtn.removeAttr('disabled');}
var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var qtyInputJson=JSON.parse($(_this).attr("data-product-selection"));var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,qtyInputJson);for(var i=0;i<filteredObjects.length;i++){qtyInputs.splice(qtyInputs.indexOf(filteredObjects[i]),1);}
qtyInputJson['qty']=_this.value;qtyInputs.push(qtyInputJson);sessionStorage.setItem("qtyInputs",JSON.stringify(qtyInputs));ACC.orderform.setTotalItemPrice($(_this),_this.value,$(_this).siblings('.price').data('variant-price'));},setStateOrderFormButton:function(){ACC.orderform.$createOrderFormButton.attr('disabled','disabled');var checkedProducts=ACC.orderform.getProductsIdsFromSessionStorage();if(checkedProducts.length>0){ACC.orderform.$createOrderFormButton.removeAttr("disabled");}
else{ACC.orderform.$createOrderFormButton.attr('disabled','disabled');}},addProductIdsToSessionStorage:function(checkbox){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds==null||clickedProductIds==undefined){sessionStorage.setItem("checkedProducts",JSON.stringify([]))
clickedProductIds=new Array();}
var ifProductExist=clickedProductIds.indexOf(checkbox.value);if(checkbox.checked){if(ifProductExist==-1)
clickedProductIds.push(checkbox.value);}else{if(ifProductExist!=-1)
clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));ACC.orderform.setStateOrderFormButton();},fetchOrPopulateSessionStorageObj:function(item){var storageObj=JSON.parse(sessionStorage.getItem(item));if(storageObj==null||storageObj==undefined){sessionStorage.setItem(item,JSON.stringify([]))
storageObj=new Array();}
return storageObj},makeUserSelectionAfterPagination:function(){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds!=null){$(ACC.orderform.$skuIDCheckbox).each(function(){if(clickedProductIds.indexOf(this.value)!=-1)
$(this).prop("checked",true);})}},fillQuantityValueForPagination:function(userQtyInputSelection){var qtyInputs=JSON.parse(sessionStorage.getItem("qtyInputs"));var prevParentId,prevVariantLoop,parentTable={};if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(obj){var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,JSON.parse($(this).attr('data-product-selection')));if(filteredObjects!=null&&filteredObjects.length>0){var qty=filteredObjects[0].qty;var resetSummary=false;$(this).attr('value',qty);if(this.hasAttribute('data-variant-id')){if(prevVariantLoop===$(this).parents('table').data('variant-loop')){resetSummary=true;}
ACC.productorderform.calculateVariantTotal($(this),qty);if(prevParentId===$(this).data('parent-id')&&prevVariantLoop===$(this).parents('table').data('variant-loop')){ACC.productorderform.updateSelectedVariantGridTotal(this,0,false,resetSummary);}
else{ACC.productorderform.updateSelectedVariantGridTotal(this,0,true,resetSummary);}
prevParentId=$(this).data('parent-id');parentTable=$(this).parents('table');prevVariantLoop=parentTable.data('variant-loop');}}});ACC.orderform.$addToCartBtn.removeAttr("disabled");}
ACC.orderform.resetPriceCounters();},getProductsIdsFromSessionStorage:function(){var clickedProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");if(clickedProductIds!=null&&clickedProductIds!=""){return clickedProductIds.join(",");}
return[];},removeProductIdFromSessionStorage:function(productId){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));var ifProductExist=clickedProductIds.indexOf(productId);if(ifProductExist!=-1){clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));},bindToToggleProductIds:function(addProductIdsCheckBox){addProductIdsCheckBox.on("change",function(event){var checked=$(this).prop("checked");ACC.orderform.replaceSearchLabel(checked);var joinedProductIds=$.map(ACC.orderform.$selectedProductIdsContainer.find(".product-id-tag-box .product-id"),function(index){return $(index).text()}).join(", ");if(joinedProductIds!==""){ACC.orderform.$productIdsInput.val(joinedProductIds);}
ACC.orderform.$selectedProductIdsContainer.empty();});},appendProductIdsForSearch:function(){ACC.orderform.stripOutInvalidChars();var productIds=ACC.orderform.$productIdsInput.val().split(",");productIds=$.map(productIds,function(productId,index){return($.trim(productId));});productIds=$.unique(productIds);var presentProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");$.each(productIds,function(index,productId){var $existingProductId=ACC.orderform.$selectedProductIdsContainer.find("#product-id-"+productId);if(productId!==''&&$existingProductId.length==0){ACC.orderform.$productIdTagBoxTemplate.tmpl({productId:productId,index:index}).appendTo(ACC.orderform.$selectedProductIdsContainer);}
if(presentProductIds.indexOf(productId)==-1){presentProductIds.push(productId);}});sessionStorage.setItem("checkedProducts",JSON.stringify(presentProductIds));ACC.orderform.$productIdsInput.val('');ACC.orderform.$productIdsInput.focus();},bindAddToCartClick:function(addToCartBtn){addToCartBtn.click(function(){$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:'POST',dataType:'json',contentType:'application/json',data:ACC.orderform.getJSONDataForAddToCart(),async:false,success:function(response){$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);ACC.product.displayAddToCartPopup(response);ACC.orderform.cleanUserQtySelection(ACC.orderform.$userQtyInputSelection);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});},getJSONDataForAddToCart:function(){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var skusAsJSON=[];for(var i=0;i<qtyInputs.length;i++){if(parseInt(qtyInputs[i].qty)>0){skusAsJSON.push({"product":{"code":qtyInputs[i].product},"quantity":qtyInputs[i].qty});}}
return JSON.stringify({"cartEntries":skusAsJSON});},bindToRemoveProductId:function(removeProductIdButton){ACC.orderform.$selectedProductIdsContainer.on("click",removeProductIdButton,function(event){event.preventDefault();var valueToRemove=$(event.target).parents('.js-remove-product-id');ACC.orderform.removeProductIdFromSessionStorage($(valueToRemove).children('.product-id').text());$(valueToRemove).remove();ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",true);ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$advSearchButton.click();});},cleanUserQtySelection:function(userQtyInputSelection){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(){$(this).prop('value',0);ACC.orderform.$addToCartBtn.attr('disabled','disabled');ACC.orderform.setTotalItemPrice($(this),0,0);})}
ACC.productorderform.cleanValues();ACC.productorderform.resetSelectedVariant();ACC.orderform.$totalPrice.html(ACC.productorderform.formatTotalsCurrency('0.00'));ACC.orderform.$totalItemsCount.text('0');ACC.orderform.$totalPriceValue.val(0);ACC.orderform.cleanupQtyInputFromSessionStorage();},replaceSearchLabel:function(productIdsChecked){var currentLabelHtml=ACC.orderform.$searchCurrentLabel.html();var searchByIdsLabelHtml=ACC.common.encodeHtml($("#searchByIdsLabel").val());var searchByKeywordLabelHtml=ACC.common.encodeHtml($("#searchByKeywordLabel").val());if(productIdsChecked){currentLabelHtml=currentLabelHtml.replace(searchByKeywordLabelHtml,searchByIdsLabelHtml);}else{currentLabelHtml=currentLabelHtml.replace(searchByIdsLabelHtml,searchByKeywordLabelHtml);}
ACC.orderform.$searchCurrentLabel.html(currentLabelHtml);},stripOutInvalidChars:function(){ACC.orderform.$productIdsInput.val(ACC.orderform.$productIdsInput.val().replace(/[^a-z0-9 ,.\-_]/ig,''));},cleanupQtyInputFromSessionStorage:function(){sessionStorage.removeItem("qtyInputs");sessionStorage.removeItem("totalPrice");sessionStorage.removeItem("totalPriceVal");sessionStorage.removeItem("totalItems");},resetPriceCounters:function(){ACC.orderform.$totalItemsCount.text(sessionStorage.totalItems);if(sessionStorage.totalPrice!==undefined){ACC.orderform.$totalPrice.html((ACC.sanitizer.sanitize(sessionStorage.totalPrice)));}else{ACC.orderform.$totalPrice.html(ACC.productorderform.formatTotalsCurrency('0.00'));}
ACC.orderform.$totalPriceValue.val(sessionStorage.totalPriceVal||0);ACC.orderform.fillTotalItemPrice();},setTotalItemPrice:function(item,quantity,price){if(!item.data('variant-id')){var htmlContent=(quantity>0)?ACC.productorderform.formatTotalsCurrency(price*quantity):'';item.parent().next('.item__total').text(htmlContent);}},fillTotalItemPrice:function(){if(sessionStorage.qtyInputs!==undefined){var qtyInputsJson=JSON.parse(sessionStorage.qtyInputs);var $product={};for(var i=0;i<qtyInputsJson.length;i++){if(qtyInputsJson[i].qty>0){$product=$('.'+qtyInputsJson[i].product);var totalPrice=ACC.productorderform.formatTotalsCurrency($product.siblings('.price').data('variant-price')*qtyInputsJson[i].qty);$product.parent().siblings('.item__total').text(totalPrice);}}}},filterMatchingQtyInputs:function(qtyInputs,dataValueObj){var filteredObjects=$.grep(qtyInputs,function(obj){return dataValueObj.product==obj.product;});return filteredObjects;}};};ACC.approval={_autoload:["bindToModalActionButton","bindToOrderApprovalDecisionButtons","bindToModalCancelButton"],bindToModalActionButton:function(){$(document).on('click','.approverDecisionButton',function(){var form=ACC.approval.currentForm;form.find('#approverSelectedDecision').attr("value",$(this).data('decision'));ACC.approval.isDecisionMade=true;ACC.colorbox.close();});},bindToModalCancelButton:function(){$(document).on('click','.cancelOrderApprovalCommentButton',function(e){e.preventDefault();ACC.colorbox.close();});},bindToOrderApprovalDecisionButtons:function(){ACC.approval.bindToOrderApprovalDecisionButton('.approverDecisionApprovalButton','.orderApprovalApproveCommentModal');ACC.approval.bindToOrderApprovalDecisionButton('.approverDecisionRejectButton','.orderApprovalRejectCommentModal');},bindToOrderApprovalDecisionButton:function(decisionButtonSelector,popupModalSelector){$(document).on('click',decisionButtonSelector,function(e){e.preventDefault();var form=$(this).closest("form");var titleHtml=$(this).html();var quoteCommentModal=form.find(popupModalSelector);ACC.approval.currentForm=form;form.find('textarea').val('');ACC.approval.isDecisionTaken=false;ACC.colorbox.open(titleHtml,{href:quoteCommentModal,inline:true,width:"620px",onClosed:function(){if(ACC.approval.isDecisionMade){form.submit();}}});});}};ACC.captcha={bindAll:function()
{this.renderWidget();},renderWidget:function()
{$.ajax({url:ACC.config.encodedContextPath+"/register/captcha/widget/recaptcha",type:'GET',cache:false,success:function(html)
{if($(html)!=[])
{$(html).appendTo('.js-recaptcha-captchaaddon');$.getScript('https://www.google.com/recaptcha/api.js?hl='+document.documentElement.lang,function()
{if($('#recaptchaChallangeAnswered').val()=='false')
{$('#g-recaptcha_incorrect').show();}});}}});}};$(document).ready(function()
{if($('#registerForm').html()!=null||$('#updateEmailForm').html()!=null)
{ACC.captcha.bindAll();}});ACC.invoice={$errorMessage:$("#invoiceErrorMessage"),bindAll:function(){this.bindInvoicePDF();this.backToInvoices();},backToInvoices:function(){$(".invoiceTopBackBtn").on("click",function(){var sUrl=$(this).data("backToInvoicelist");window.location=sUrl;});},bindInvoicePDF:function(){$(document).on("click",'.invoiceClass',function(event){$('.global-alerts').html("");ACC.invoice.$errorMessage.hide();ACC.invoice.doAjaxCallForInvoice(this,event);});},doAjaxCallForInvoice:function(element,event){event.preventDefault();var invoiceCode=$(element).data("invoicenumber");var erorrmsg=$(element).data("errormsg");$.ajax({url:ACC.config.contextPath+'/my-company/organization-management/invoicedocument/invoicedownload',data:{invoiceCode:invoiceCode},type:'GET',contentType:'application/pdf',sync:true,success:function(data){window.open(this.url,'_blank',"width=1024,height=768,resizable=yes,scrollbars=yes,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");},error:function(data,textStatus,ex){ACC.invoice.$errorMessage.text(erorrmsg+' : '+invoiceCode).css('color','#c90400').show();var body=$("html, body");body.stop().animate({scrollTop:0},'500','swing',function foo(){});}});}};$(document).ready(function(){ACC.invoice.bindAll();});ACC.secureportal={_autoload:["bindRegister","registerNavigationItem","formDisplayBasedOnUser","changeFieldsAfterRadioButtonChange","disableSubmitButtonOnStartup","changeSubmitButtonOnCheckboxUpdate","formatPhoneNumber","restrictSpecialCharInName","removeHyphen"],bindRegister:function(){var oController=this;$('.js-secureportal-confirm-register-email').bind("cut copy paste",function(e){e.preventDefault();});if(!$(".js-secureportal-confirm-register-email").val()&&$(".js-secureportal-orignal-register-email").val()){$(".js-secureportal-register-button").attr("disabled","disabled");}
$(document).on("change",".js-secureportal-confirm-register-email, .js-secureportal-orignal-register-email",function(){var orginalEmail=$(".js-secureportal-orignal-register-email").val();orginalEmail=orginalEmail.toLowerCase();var confirmationEmail=$(".js-secureportal-confirm-register-email").val();confirmationEmail=confirmationEmail.toLowerCase();$(".js-secureportal-confirm-register-email").val(confirmationEmail);$(".js-secureportal-orignal-register-email").val(orginalEmail);if(orginalEmail===confirmationEmail){$(".js-secureportal-email-not-match-message").hide();}else{$(".js-secureportal-email-not-match-message").show();}
oController._enableRegisterButton();oController.addNewUser();});},restrictSpecialCharInName:function(){$(document).on('keyup','.nameField',function(e){var yourInput=$(this).val();re=/[/\\:\\*?\"'<>\\|@\\&#]/gi;var isSplChar=re.test(yourInput);if(isSplChar){var no_spl_char=yourInput.replace(/[/\\:\\*?\"'<>\\|@\\&#]/gi,'');$(this).val(no_spl_char);}});},formatPhoneNumber:function(){$(document).on('keyup','.registertelephone',function(e){phone_number_check(this,e);});function phone_number_check(field,e){var key_code=e.keyCode,key_string=String.fromCharCode(key_code),press_delete=false,dash_key=189,delete_key=[8,46],direction_key=[33,34,35,36,37,38,39,40],selection_end=field.selectionEnd;if(delete_key.indexOf(key_code)>-1){press_delete=true;}
if(key_string.match(/^\d+$/)||press_delete){phone_formatting(field,press_delete);}
else{e.preventDefault();phone_formatting(field,'revert');}}
function phone_formatting(ele,restore){var new_number,number=ele.value.replace(/\D/g,'');if(number.length>3){new_number=number.substring(0,3)+'-';if(number.length===4||number.length===5||number.length===6){new_number+=number.substr(3);}else if(number.length>6){new_number+=number.substring(3,6)+'-';}
if(number.length>6){new_number+=number.substring(6);}}else{new_number=number;}
ele.value=(new_number.length>12)?new_number.substring(0,12):new_number;}},removeHyphen:function(){$(document).on('click','#registerButton',function(e){var newPhoneNumber=$(".phoneNumber").val();var formatedPhoneNumber=clean(newPhoneNumber);$(".phoneNumber").val(formatedPhoneNumber);var newFaxNumber=$(".faxNumber").val();var formatedFaxNumber=clean(newFaxNumber);$(".faxNumber").val(formatedFaxNumber);var customerId=$(".leftpad").val();if(customerId){var formattedId=pad_with_zeroes(customerId);}
$(".leftpad").val(formattedId);});function clean(newNumber){if(newNumber!=undefined){newNumber=newNumber.replace(/-/g,"");return newNumber}}
function pad_with_zeroes(number){var my_string=''+number;while(my_string.length<10){my_string='0'+my_string;}
return my_string;}},registerNavigationItem:function(){var registerLink=$(".js-register-navigation-item").clone();$('.js-userAccount-Links').append(registerLink);registerLink.wrap("<li class='auto'></li>");},formDisplayBasedOnUser:function(){var currentSiteID=$("#cmsCurrentSiteID").val();if(currentSiteID=='ch'){if($('#radiobutton_no').is(':checked')){$("#existingUserRegistration").hide();$("#newUserRegistration").show();$(".newUserRegistration").show();}else{$("#newUserRegistration").hide();$(".newUserRegistration").hide();$("#existingUserRegistration").show();}}
else{if($('#radiobutton_no').is(':checked')){$("#existingUserRegistration").hide();$("#newUserRegistration").show();}else{$("#newUserRegistration").hide();$("#existingUserRegistration").show();}}},disableSubmitButtonOnStartup:function(){$(".js-secureportal-register-button").attr("disabled","disabled");$("#checkBoxLegalPolicy").prop('checked',false);},changeSubmitButtonOnCheckboxUpdate:function(){var oController=this;$("#registerForm").on("change",function(){oController._enableRegisterButton();});$("#assistedRegisterForm").on("change",function(){oController.addNewUser();});$("#checkBoxLegalPolicy,#checkBoxLegalPolicy1").on('click',function(){oController._enableRegisterButton();});$("#assistedRegisterForm #checkBoxLegalPolicy").on('click',function(){oController.addNewUser();});},changeFieldsAfterRadioButtonChange:function(){$('#radiobutton_no, #radiobutton_yes').on('change',function(){var currentSiteID=$("#cmsCurrentSiteID").val();var bNoRadioButtonChecked=$("#radiobutton_no:checked").val()?true:false;if(currentSiteID=='ch'){if(bNoRadioButtonChecked){$("#existingUserRegistration").hide();$("#newUserRegistration").show();$(".newUserRegistration").show();}else{$("#newUserRegistration").hide();$(".newUserRegistration").hide();$("#existingUserRegistration").show();}}
else
{if(bNoRadioButtonChecked){$("#existingUserRegistration").hide();$("#newUserRegistration").show();}else{$("#newUserRegistration").hide();$("#existingUserRegistration").show();}}});},addNewUser:function(){var newUserForm=$('#assistedRegisterForm').is(':visible');var captchEnabled=$("#captchaEnabled").val();var originalEmail=$(".js-secureportal-orignal-register-email").val();var confirmationEmail=$(".js-secureportal-confirm-register-email").val();var captcha_response=$(".hiddenRecaptcha").val();var accId=$('[name="b2bUnitId"]').val();var registerTitle=$('[name="titleCode"]').val();var registerName=$('[name="name"]').val();var registerLang=$('[name="language"]').val();var phone=$('[name="telephone"]').val();if(newUserForm){if($('#radiobutton_yes').prop('checked',)==true){if(captchEnabled){if(accId.length>0&&registerTitle!==null&&registerName.length>0&&registerLang!==null&&phone.length>0&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked')&&$(".hiddenRecaptcha").val()!==null&&$(".hiddenRecaptcha").val()!=="")
{$(".js-secureportal-register-button").removeAttr("disabled");}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}else if(accId.length>0&&registerTitle!==null&&registerName.length>0&&registerLang!==null&&phone.length>0&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked'))
{$(".js-secureportal-register-button").removeAttr("disabled");}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}}},_enableRegisterButton:function(){var captchEnabled=$("#captchaEnabled").val();var originalEmail=$(".js-secureportal-orignal-register-email").val();var confirmationEmail=$(".js-secureportal-confirm-register-email").val();var captcha_response=$(".hiddenRecaptcha").val();var registerTitle=$('[name="titleCode"]').val();var registerName=$('[name="name"]').val();var registerId=$('[name="customerId"]').val();var registerLang=$('[name="language"]').val();var glnNumber=$('[name="glnNumber"]').val();var cantonProgram=$('[name="canton"]').val();var street=$('[name="companyAddressStreet"]').val();var pcode=$('[name="companyAddressPostalCode"]').val();var city=$('[name="companyAddressCity"]').val();var country=$('[name="companyAddressCountryIso"]').val();var phone=$('[name="telephone"]').val();var phExist=$('.newUserRegistration').is(':visible');var additionalCheckBox=$('#resgisterCheckBox1').is(':visible');var checkBoxValid=$("#checkBoxLegalPolicy").prop('checked');var checkBoxValid1=$("#checkBoxLegalPolicy1").prop('checked');function commonValidation(){if(phExist){if(phone.length>0){var phoneValidation=true;}}else{phoneValidation=null;}
if(additionalCheckBox){if(checkBoxValid1==true){var TCheckBox=true;}}
else{TCheckBox=null}
if(phoneValidation&&TCheckBox){$(".js-secureportal-register-button").removeAttr("disabled");}else if(phoneValidation===null&&TCheckBox===null){$(".js-secureportal-register-button").removeAttr("disabled");}else if(phoneValidation===null&&TCheckBox){$(".js-secureportal-register-button").removeAttr("disabled");}
else if(TCheckBox===null&&phoneValidation){$(".js-secureportal-register-button").removeAttr("disabled");}
else{$(".js-secureportal-register-button").attr("disabled","disabled");}}
function registerFormValidation(){if(captchEnabled){if(registerTitle!==null&&registerName.length>0&&registerId.length>0&&registerLang!==null&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked')&&$(".hiddenRecaptcha").val()!==null&&$(".hiddenRecaptcha").val()!=="")
{commonValidation();}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}else if(registerTitle!==null&&registerName.length>0&&registerId.length>0&&registerLang!==null&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked')){commonValidation();}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}
if($('#radiobutton_yes').prop('checked',)==true){registerFormValidation();}else if($('#radiobutton_no').prop('checked',)==true){if(captchEnabled){if(registerTitle!==null&&registerName.length>0&&glnNumber.length>0&&cantonProgram!==null&&street.length>0&&pcode.length>0&&city.length>0&&country!==null&&registerLang!==null&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked')&&$(".hiddenRecaptcha").val()!==null&&$(".hiddenRecaptcha").val()!=="")
{commonValidation();}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}else if(registerTitle!==null&&registerName.length>0&&glnNumber.length>0&&cantonProgram!==null&&street.length>0&&pcode.length>0&&city.length>0&&country!==null&&registerLang!==null&&originalEmail.length>0&&originalEmail===confirmationEmail&&$("#checkBoxLegalPolicy").prop('checked')){commonValidation();}else{$(".js-secureportal-register-button").attr("disabled","disabled");}}},};$(".nav-item.borT.dropdown .accNavComponent__child-wrap div").find("a").each(function(){$(this).wrap("<li></li>")})
var menuData=$(".nav-item.borT.dropdown .accNavComponent__child-wrap div").clone()
var listItemData=$(".nav-item.borT.dropdown .accNavComponent__child-wrap li").clone()
var parentDivTop="<div class='dropdownWrap dropdown-menu'></div>"
$(".nav-item.borT.dropdown ul > li").remove()
$(".nav-item.borT.dropdown ul").append(listItemData)
$(".nav-item.borT.dropdown ul div.yCmsContentSlot").remove();$(".nav-item.borT.dropdown ul div.yCmsComponent").remove();$(".nav-item.borT.dropdown ul").before(menuData[0])
$(menuData[0]).contents().unwrap().wrap('<a/>');$(".nav-item.borT.dropdown > a").addClass("dropdown-toggle ushelp-link")
$(".nav-item.borT.dropdown > a").attr({"data-toggle":"dropdown","role":"button","aria-haspopup":"true","aria-expanded":"false"})
$(".nav-item.borT.dropdown ul li > a").addClass("dropdown-item");$(parentDivTop).appendTo('.nav-item.borT.dropdown');$(".nav-item.borT.dropdown ul").addClass("container");$(".nav-item.borT.dropdown").find(".container").appendTo(".dropdownWrap");$(".my-account-section .accNavComponent__child-wrap div").find("a").each(function(){$(this).wrap("<li></li>")})
var menuDataAcc=$(".my-account-section .accNavComponent__child-wrap div").clone()
var listItemDataAcc=$(".my-account-section .accNavComponent__child-wrap li").clone()
$(".my-account-section ul").addClass("dropdown-menu")
$(".my-account-section ul").append(listItemDataAcc)
$(".my-account-section ul div.yCmsContentSlot").remove();$(".my-account-section ul div.yCmsComponent").remove();$(".my-account-section ul").before(menuDataAcc[0])
$(menuDataAcc[0]).contents().unwrap().wrap('<a/>');$(".my-account-section > a").addClass("dropdown-toggle")
$(".my-account-section > a").attr({"data-toggle":"dropdown","role":"button","aria-haspopup":"true","aria-expanded":"false"})
$(document).ready(function(){$(document).on('click','.ushelp-link',function(){$(document).find('.search-link').removeClass('active');$(document).find('.searchbox-us').addClass('hide');});$(".searchicon-us").click(function(){$(this).parent().toggleClass("active");$('.searchbox-us').toggleClass("hide");if($("input.search-box").is(':visible')){            $(".search-container input.search-box").focus();       }});$(document).click(function(e){var container=$(".searchbox-us");var container1=$(".search-link");if((!container.is(e.target)&&container.has(e.target).length===0)&&(!container1.is(e.target)&&container1.has(e.target).length===0)){container.addClass("hide");$('.site-header-bottom').find('.search-link').removeClass('active');}});$(document).on('click','.drug',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','#externalLinkUnit .close-pos,#externalLinkUnit .secondary-btn ',function(){colorBoxHide();});$(document).on('click','.druglink .ok_continue',function(){var url=$('.drug').attr('href')
window.open(url);$('#externalLinkUnit').modal('hide');setTimeout(function(){$('#colorbox').css('display','none');},10);});$(document).on('click','.privacy',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.privacypolicy .ok_continue',function(){var prv=$('.privacy').attr('href')
window.open(prv);$('#colorbox').css('display','none');});$(document).on('click','.access',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.accessibility .ok_continue',function(){var acc=$('.access').attr('href');window.open(acc);$('#colorbox').css('display','none');});$(document).on('click','.EssentialAccess a',function(e){var cmsSiteID=$("#cmsCurrentSiteID").val();var beforeLoginSiteId=$("#js-currentSiteId").val();if(cmsSiteID=='ch'||beforeLoginSiteId=='ch'){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");}});$(document).on('click','.accesslogo .ok_continue',function(){var acclogo=$('.accessibility_logo').find('.EssentialAccess a').attr('href');window.open(acclogo);$('#colorbox').css('display','none');});$(document).on('click','.msdhome',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.msd .ok_continue',function(){var msdh=$('.msdhome').attr('href')
window.open(msdh);$('#colorbox').css('display','none');});$(document).on('click','.diseaseindicate',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.pdplink .ok_continue',function(){var diseaselink=$('.diseaseindicate').attr('href')
window.open(diseaselink);$('#colorbox').css('display','none');});$(document).on('click','.social-media .Twitter a',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.twitter .ok_continue',function(){var twt=$('.social-media').find('.Twitter a').attr('href');window.open(twt);$('#colorbox').css('display','none');});$(document).on('click','.social-media .LinkedIn a',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('linkedin');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('youtube');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.linkedin .ok_continue',function(){var lkd=$('.social-media').find('.LinkedIn a').attr('href');window.open(lkd);$('#colorbox').css('display','none');});$(document).on('click','.social-media .YouTube a',function(e){e.preventDefault();$(this).parents('body').find('.externalLinkUnit').addClass('youtube');$(this).parents('body').find('.externalLinkUnit').removeClass('druglink');$(this).parents('body').find('.externalLinkUnit').removeClass('privacypolicy');$(this).parents('body').find('.externalLinkUnit').removeClass('accessibility');$(this).parents('body').find('.externalLinkUnit').removeClass('accesslogo');$(this).parents('body').find('.externalLinkUnit').removeClass('msd');$(this).parents('body').find('.externalLinkUnit').removeClass('pdplink');$(this).parents('body').find('.externalLinkUnit').removeClass('twitter');$(this).parents('body').find('.externalLinkUnit').removeClass('linkedin');$('#externalLinkUnit').modal("show");$('#colorbox').css('display','none');});$(document).on('click','.youtube .ok_continue',function(){var ytb=$('.social-media').find('.YouTube a').attr('href');window.open(ytb);$('#colorbox').css('display','none');});$("#prod-filter").click(function(e){$(this).toggleClass("show");$(".side-nav-container").toggleClass("show");$("#my-account").removeClass("show");e.stopPropagation();return false;});$(".list-group-item-action").click(function(){$(".ship-list-group-item").removeClass("active");});$(".ship-list-group-item").click(function(){$(".ship-list-group-item").removeClass("active");$(this).toggleClass("active");});$(".pkg-input").keyup(function(e){let value=e.target.value;let isNumber=/^\+?(0|[1-9]\d*)$/.test(value);var dataDosesPerPkg=$(this).data("doese-per-pkg");if(!isNumber){this.value=this.value.replace(/[^0-9]/g,'');if(this.value!=null&&this.value.trim()==""){$(this).parent().find('.unit-qty').html("1");$(this).parent().find('.conversion-rate').html(dataDosesPerPkg);}
return;}
var maxVal=100;if(value>1&&value<=maxVal){$(this).parent().find('.unit-qty').html(value);$(this).parent().find('.conversion-rate').html(dataDosesPerPkg*value);}
else if(value>ACC.config.validProdQty){let doseVal=ACC.config.validProdQty;$(this).parent().find('.unit-qty').html(doseVal);$(this).parent().find('.conversion-rate').html(dataDosesPerPkg*doseVal);}else{$(this).parent().find('.unit-qty').html("1");$(this).parent().find('.conversion-rate').html(dataDosesPerPkg);}});$(document).on("click",".togglePanel a.toggleLink",function(){if($(this).hasClass('active')){$(this).removeClass('active').next('.toggleContent').removeClass('active').hide().addClass("hide");$(this).parent("div.togglePanel").removeClass('active');}
else{$('.toggleContent').removeClass('active');$(this).addClass("active").next('.toggleContent').removeClass("hide").addClass('active').show();$(this).parent("div.togglePanel").addClass("active");}});var warningTimeout=600000;var timoutNow=300000;var sessOutTime=900000;var warningTimerID,timeoutTimerID;function startTimer(){warningTimerID=window.setTimeout(warningInactive,warningTimeout);}
if(warningTimerID>sessOutTime){alert('redirect');window.location.href=ACC.config.encodedContextPath+"/logout";janrain.capture.ui.endCaptureSession();}
var aMTranslation=ACC.aMTranslation;var pMTranslation=ACC.pMTranslation;var cmsSiteID=$("#cmsCurrentSiteID").val();function warningInactive(){window.clearTimeout(warningTimerID);timeoutTimerID=window.setTimeout(IdleTimeout,timoutNow);$('#sessionTimeout-popup1').modal({backdrop:'static',keyboard:false});$('#sessionTimeout-popup1').modal('show');var currentdate=new Date(new Date().getTime()+timoutNow);var t_Hours=currentdate.getHours();var t_Minutes=currentdate.getMinutes();if(cmsSiteID=='de'){var newformat=t_Hours>=24?pMTranslation:aMTranslation;t_Hours=t_Hours%24;t_Hours=t_Hours?t_Hours:24;}else{var newformat=t_Hours>=12?pMTranslation:aMTranslation;t_Hours=t_Hours%12;t_Hours=t_Hours?t_Hours:12;}
t_Minutes=t_Minutes<10?'0'+t_Minutes:t_Minutes;$(".log_outTime").html(t_Hours+':'+t_Minutes+' '+newformat);}
function resetTimer(){window.clearTimeout(timeoutTimerID);window.clearTimeout(warningTimerID);startTimer();}
function IdleTimeout(){window.location.href=ACC.config.encodedContextPath+"/login";localStorage.setItem("lang","en");$('#lang-menu').find('.selected-lang').html(localStorage.setItem("lang","en"));janrain.capture.ui.endCaptureSession();}
function setupTimers(){document.addEventListener("mousemove",resetTimer,false);document.addEventListener("mousedown",resetTimer,false);document.addEventListener("keypress",resetTimer,false);document.addEventListener("keyup",resetTimer,false);document.addEventListener("keydown",resetTimer,false);document.addEventListener("click",resetTimer,false);document.addEventListener("touchmove",resetTimer,false);document.addEventListener("onscroll",resetTimer,false);startTimer();}
$(document).on('click','#logIn-btn',function(){resetTimer();$('#sessionTimeout-popup1').modal('hide');location.reload();});$(document).on('click','#logoff-btn',function(){resetTimer();window.location.href=ACC.config.encodedContextPath+"/logout";janrain.capture.ui.endCaptureSession();return false;});$(document).ready(function(){setupTimers();});if($("#isCantonSelected").val()=="true"){$(".js-mainHeader .navbar-nav .nav-item a.js-saved-cart-link").hide();$(".my-account-section .dropdown-menu a.js-saved-cart-link").hide();}
if($("#lang-form input:radio[lang=en]").is(":checked")){$('select > option[value="Dre"]').css('display','none');}})
$(".product__list--item--us .show_my_price").each(function(index){$(this).on("click",function(){$('.overlay-container').show();let _this=this;let reurl=$(this).attr('action');let dataSample=$(this).serialize();$.ajax({type:"POST",url:reurl,data:dataSample,success:function(response){if(response===null||response===""){$(_this).hide();$(_this).parents(".list-item-contents").find(".contract-price-err.hide").removeClass("hide");$('.overlay-container').hide();}else{let priceValue=response.CONTRACT_PRICE.value;let priceFormattedValue=response.CONTRACT_PRICE.formattedValue;var cmsSiteID=$("#cmsCurrentSiteID").val();let formattedCatalogprice;let catalogPrice=0.0;if(cmsSiteID=='us'||cmsSiteID=='usmo'){catalogPrice=response.CATALOG_PRICE.value;formattedCatalogprice=response.CATALOG_PRICE.formattedValue;}
assign_PriceValue(priceFormattedValue,formattedCatalogprice,priceValue,catalogPrice,_this)
let savings=catalogPrice-priceValue;$(_this).parents(".list-item-contents").find(".contractSavings.hide").text(savings);$(_this).parents(".list-item-contents").find(".contractPrice.hide").text(priceValue);$('.overlay-container').hide();ACC.gtm.linkClick_gtm('button','appear','check my price');}},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);$(_this).hide();$("#backend-err").removeClass("hide");$('.overlay-container').hide();}});});})
$(".product__list--item--us .pkg-input").each(function(index){$(this).on("keyup",function(){var thisVal=$(this);setTimeout(function(){var regex=new RegExp("^[0-9]+$");let quantity=$(thisVal).val();if(!(regex.test(quantity))||null===quantity||''===quantity||undefined===quantity){return false;}
$('.overlay-container').show();$(thisVal).val(setValidProdQty(quantity));quantity=$(thisVal).val();if($(thisVal).val()>0){$(thisVal).parents('.product__list--item--us').find('.input-empty-err-msg').addClass('hide');$(thisVal).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',false);}else{$(thisVal).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',true);}
let _this=$(thisVal).parents('.product__list--item--us').find('.show_my_price');let contractPrice=$(_this).parents(".list-item-contents").find(".contractPrice.hide").text();let reurl=$(thisVal).parents('.product__list--item--us').find('.show_my_price').attr('action');let dataSample=$(_this).serialize();$.ajax({type:"POST",url:reurl,data:dataSample,success:function(response){if(response===null||response===""){$(_this).hide();$(_this).parents(".list-item-contents").find(".contract-price-err.hide").removeClass("hide");$('.overlay-container').hide();}else{let priceValue=response.CONTRACT_PRICE.value;let priceFormattedValue=response.CONTRACT_PRICE.formattedValue;var cmsSiteID=$("#cmsCurrentSiteID").val();let formattedCatalogprice;let catalogPrice=0.0;if(cmsSiteID=='us'||cmsSiteID=='usmo'){catalogPrice=response.CATALOG_PRICE.value;formattedCatalogprice=response.CATALOG_PRICE.formattedValue;}
assign_PriceValue(priceFormattedValue,formattedCatalogprice,priceValue,catalogPrice,_this)
$(_this).parents(".list-item-contents").find(".contractPrice.hide").text(priceValue);calculateTotals(catalogPrice,priceValue,_this,quantity);$('.overlay-container').hide();}},error:function(jqXHR,textStatus,errorThrown){$(_this).hide();$(_this).parents(".list-item-contents").find(".contract-price-err.hide").removeClass("hide");$('.overlay-container').hide();}});},100);});})
$(".product__list--item--us .pkg-input-canton").each(function(index){$(this).on("keyup",function(){var thisVal=$(this);setTimeout(function(){var regex=new RegExp("^[0-9]+$");let quantity=$(thisVal).val();if(!(regex.test(quantity)||null===quantity||''===quantity||undefined===quantity)){event.preventDefault();return false;}
$(thisVal).val(setValidProdQty(quantity));quantity=$(thisVal).val();if($(thisVal).val()>0){$(thisVal).parents('.product__list--item--us').find('.input-empty-err-msg').addClass('hide');$(thisVal).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',false);}else{$(thisVal).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',true);}},100);});})
$(".product__list--item--us .js-list-qty-selector-input").each(function(index){$(this).on("focus",function(){let _this=$(this).parents(".product__list--item--us");let inputVal=$('.add_to_cart_form').find('.js-list-qty-selector-input').val();if((inputVal==='')||(inputVal<0)){$(_this).find('.add_to_cart_form').find('.btn-plp').prop('disabled',true);}else{$(_this).find('.add_to_cart_form').find('.btn-plp').prop('disabled',false);}});});$(".product__list--item--us .btn-plp").each(function(e){$(this).on("click",function(){let inputVal=$(this).parents('.add_to_cart_form').find('.js-list-qty-selector-input').val();let loos_stockPrice=$(this).parents('.product__list--item--us').find('.stock-price').text().trim();let stockStatus=$(this).parents('.product__list--item--us').find('.stock-status').text().trim();let thisValue=$(this);var cmsSiteID=$("#cmsCurrentSiteID").val();var currencySymbol=$("#currentSiteCurrencySymbol").val();if(inputVal===''||inputVal==='0'||inputVal===undefined){$(this).parents('.product__list--item--us').find('.input-empty-err-msg').removeClass('hide');$(this).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',true);return false;}else{$('.overlay-container').show();$(this).parents('.product__list--item--us').find('.input-empty-err-msg').addClass('hide');$(this).parents('.product__list--item--us').find('.add_to_cart_form .btn-plp').prop('disabled',false);}
var intervalTime=setInterval(function(){if($('#add-to-cart-us').is(':visible')){let not_authorized=$('.not-authorized').val();if(not_authorized==="true"){$('#add-to-cart-us').find('.cart-popup').removeClass('hide');$('#add-to-cart-us').find('.add-to-cart-button button').addClass('diabled-btn');$('#add-to-cart-us').find('.add-to-cart-button').css("pointer-events","none");$('#add-to-cart-us').find('.add-to-cart-button button').prop('disabled',true);}else if(($(this).parents('.product__list--item--us').find('.contract-price-err.hide'))||($('stockStatus')===' Temporary Out of Stock')){$('#add-to-cart-us').find('.cart-popup').addClass('hide');$('#add-to-cart-us').find('.add-to-cart-button button').removeClass('diabled-btn');$('#add-to-cart-us').find('.add-to-cart-button button').prop('disabled',false);}
$('.overlay-container').hide();clearInterval(intervalTime);}},500);});});$(".sku-quantity,.pkg-input,.qty-selector .pkg-input,#updateCartForm .my-cart-qnty").keypress(function(e){return(event.charCode==8||event.charCode==0||event.charCode==13)?null:event.charCode>=48&&event.charCode<=57;});function assign_PriceValue(formattedPrice,formattedCatalogprice,priceValue,catalogPrice,_this){var cmsSiteID=$("#cmsCurrentSiteID").val();if(catalogPrice==priceValue){if(cmsSiteID=='us'||cmsSiteID=='usmo'){$(_this).parents(".list-item-contents").find(".stock-price.hide").text(formattedCatalogprice);$(_this).parents(".list-item-contents").find(".stock-price.hide").removeClass("hide");$(_this).parents(".list-item-contents").find(".contractPrice.hide").text(catalogPrice);$(_this).hide();}else{priceShowPatternForNonUS(formattedPrice,_this);}}else{if(priceValue>'0'){priceShowPatternForNonUS(formattedPrice,_this);if(cmsSiteID=='us'||cmsSiteID=='usmo'){$(_this).parents(".list-item-contents").find(".stock-discount.hide").text(formattedCatalogprice);$(_this).parents(".list-item-contents").find(".stock-discount").removeClass("hide");}
else
{$(_this).parents(".list-item-contents").find(".stock-discount").addClass("hide");}}else{$(_this).parents(".list-item-contents").find(".stock-price.hide").text(formattedPrice);$(_this).parents(".list-item-contents").find(".stock-price.hide").removeClass("hide");$(_this).hide();}}}
function priceShowPatternForNonUS(formattedPrice,_this){$(_this).parents(".list-item-contents").find(".stock-price.hide").text(formattedPrice);$(_this).parents(".list-item-contents").find(".stock-price.hide").removeClass("hide");$(_this).hide();}
function calculateTotals(catalogPrice,priceValue,_this,quantity){let savings=catalogPrice-priceValue;let sav_quantity=savings*quantity;var formattedTotalPrice;var formattedTotalSavings;var cmsSiteID=$("#cmsCurrentSiteID").val();if(!(priceValue===0)){if(priceValue!=undefined||priceValue>=0){var totalPrice=priceValue*quantity;var totalSavings=savings*quantity;if(cmsSiteID=='cl'){var formattedTotalPriceCl=totalPrice.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');formattedTotalPrice=formattedTotalPriceCl.substring(0,formattedTotalPriceCl.length-3);}else if(cmsSiteID=='de'){formattedTotalPrice=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalPrice);formattedTotalSavings=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalSavings);}else{formattedTotalPrice=totalPrice.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');formattedTotalSavings=totalSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');}
$(_this).parents(".product__list--item--us").find(".item-total span").text(formattedTotalPrice);$(_this).parents(".product__list--item--us").find(".total-savings span").text(formattedTotalSavings);if(savings>=0){$(_this).parents(".list-item-contents").find(".total-savings").css("color","#E76F00");}else{$(_this).parents(".list-item-contents").find(".total-savings").css("color","red");}}}else{var formatted_sav_qty;if(cmsSiteID!='de'){formatted_sav_qty=sav_quantity.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');}else{formatted_sav_qty=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(sav_quantity);}
$(_this).parents(".list-item-contents").find(".item-total span").text(formatted_sav_qty);}
if(!(quantity==='0')&&(!(quantity==='')||quantity>0)){if((priceValue===0)||(sav_quantity===0)){$(_this).parents('.product__list--item--us').find('.item-total').show();}else if((priceValue===undefined)||(sav_quantity==='NaN')){$(_this).parents('.product__list--item--us').find('.item-total').hide();$(_this).parents('.product__list--item--us').find('.total-savings').hide();$(_this).parents(".list-item-contents").find(".contract-price-err.hide").removeClass("hide");}else{$(_this).parents('.product__list--item--us').find('.item-total').show();$(_this).parents('.product__list--item--us').find('.total-savings').show();}}else{$(_this).parents('.product__list--item--us').find('.item-total').hide();$(_this).parents('.product__list--item--us').find('.total-savings').hide();}}
$(window).on('load',function(){$(".paymentWindow a").attr('target','_blank');if($('.pagination-empty').length==1){$('.save_Cart').prop('disabled',true);}
$('.product__list--item--us').find('.item-total').hide();$('.product__list--item--us').find('.total-savings').hide();$('.product__list--item--us .loosplp').each(function(){if($(this).is(':visible')){let loosplp=$(this).text().trim();if(!(loosplp==='')){$(this).parents('.product__list--item--us').find('.pkg-input').attr('disabled',true);$(this).parents('.product__list--item--us').find('.plp_addtocart').prop('disabled',true);$(this).parents('.product__list--item--us').find('.plp_cartBtn .add_to_cart_form .js-enable-btn').prop('disabled',true);}else{$(this).parents('.product__list--item--us').find('.pkg-input').attr('disabled',false);$(this).parents('.product__list--item--us').find('.plp_addtocart').prop('disabled',false);$(this).parents('.product__list--item--us').find('.plp_cartBtn .add_to_cart_form .js-enable-btn').prop('disabled',false);}}})
$('.full-prd-info').find('a').each(function(){let linkData=$(this).attr('href');if(linkData===''){$(this).hide();}else{$(this).show();}});$('.product__list--item--us .stock-status').each(function(){if($(this).is(':visible')){let stockStatus=$(this).parents('.product__list--item--us').find('.show-price-box .stock-status').text().trim();if((stockStatus==='')){$(this).parents('.product__list--item--us').find('.plp_cartBtn .add_to_cart_form .js-enable-btn').prop('disabled',true);}else if(!(stockStatus==='')){$(this).parents('.product__list--item--us').find('.plp_cartBtn .add_to_cart_form .js-enable-btn').prop('disabled',false);}}});$('.myprdlist').each(function(){if($(this).is(':visible')){let loosplp=$(this).text().trim();if(!(loosplp==='')){$(this).parents('.myprdlist_item').find('.sku-quantity').attr('disabled',true);$(this).parents('.myprdlist_item').find('.add_cart_btn button').prop('disabled',true);}else{$(this).parents('.myprdlist_item').find('.sku-quantity').attr('disabled',false);$(this).parents('.myprdlist_item').find('.add_cart_btn button').prop('disabled',false);}}})
$('.product__list--item--us').each(function(){let contractPrice=$(this).find('.contract-price-on-load').text();if(contractPrice!=undefined&&contractPrice>0){let contractPriceData=$(this).find('.contract-formatprice-on-load').text();let catalogPriceData=$(this).find('.stock-discount').text();let _this=$(this).find('.show_my_price');let catalogPrice=$(_this).find('#catalogPrice').val();assign_PriceValue(contractPriceData,catalogPriceData,contractPrice,catalogPrice,_this)
let savings=catalogPrice-contractPrice;$(_this).parents(".list-item-contents").find(".contractSavings.hide").text(savings);$(_this).parents(".list-item-contents").find(".contractPrice.hide").text(contractPrice);}})
var cmsSiteID=$("#cmsCurrentSiteID").val();if(cmsSiteID=='ch'||cmsSiteID=='ca'||cmsSiteID=='de'){$('.product__list--item--us .purchasable').each(function(){let purchasable=$(this).val();if(purchasable=='false'){$(this).parents('.product__list--item--us').find('.pkg-input').attr('disabled',true);$(this).parents('.product__list--item--us').find('.btn-plp').prop('disabled',true);$(this).parents('.product__list--item--us').find('.plp_cartBtn .add_to_cart_form').prop('disabled',true);}})
$('.pdp-totals .purchasable').each(function(){let purchasable=$(this).val();if(purchasable=='false'){$(this).parents('.pdp-totals').find('.pkg-input').attr('disabled',true);$(this).parents('.pdp-totals').find('.btn-pdp').prop('disabled',true);$(this).parents('.pdp-totals').find('.add_to_cart_form').prop('disabled',true);}})}});$(document).ready(function(){$("[data-toggle=tooltip").tooltip();$('.checkout_qty').find('.disabled').attr('disabled',true);$(document).on("click",".checkout-next, .checkoutSummaryButton,.cart-checkout .header.completed .edit,.cart_page,.js-execute-entry-action-button,.add-to-cart-button button,.add-to-cart-button,.js-saveorder-addto-cart-link",function(){$('.overlay-container').show();});$('.js-continue-checkout-button').click(function(){$('.overlay-container').show();})
if($('.checkout_summary').text().trim()==''){$('.checkout_summary').css('display','none');}
$(".pdp-price .pkg-input").on("keyup",function(){let _this=this;let quantity=$(this).val();var cmsSiteID=$("#cmsCurrentSiteID").val();$(this).val(setValidProdQty(quantity));quantity=$(this).val();let contractPrice=$(_this).parents(".pdp-totals").find(".pdp-contractPrice").text().trim();let catalogPrice=0.0;if(cmsSiteID=='us'||cmsSiteID=='usmo'){catalogPrice=$(_this).parents(".pdp-totals").find(".pdp-catalogPrice").text().trim();}
var formattedTotalPrice;var formattedTotalSavings;if(!(contractPrice==='0.0')){if(contractPrice!=undefined&&contractPrice>0){var totalPrice=contractPrice*quantity;var totalSavings=(catalogPrice-contractPrice)*quantity;if(cmsSiteID=='cl'){var formattedTotalPriceCl=totalPrice.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');formattedTotalPrice=formattedTotalPriceCl.substring(0,formattedTotalPriceCl.length-3);}else if(cmsSiteID=='de'){formattedTotalPrice=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalPrice);formattedTotalSavings=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalSavings);}else{formattedTotalPrice=totalPrice.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');formattedTotalSavings=totalSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');}
$(_this).parents(".pdp-totals").find("#pdp-total span").text(formattedTotalPrice);$(_this).parents(".pdp-totals").find("#pdp-savings span").text(formattedTotalSavings);if(totalSavings>=0){$(_this).parents(".pdp-totals").find("#pdp-savings").css("color","#E76F00");}else{$(_this).parents(".pdp-totals").find("#pdp-savings").css("color","red");}}}else{var formattedTotalSavings;var totalSavings=(catalogPrice-contractPrice)*quantity;if(cmsSiteID!='de'){formattedTotalSavings=totalSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');}else{formattedTotalSavings=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalSavings);}
$(_this).parents(".pdp-totals").find("#pdp-total span").text(formattedTotalSavings);}
if((contractPrice==='0.0')||(totalSavings==='0')){$(".pdp-totals").find("#pdp-savings").hide();}else{$('.pdp-totals').find('#pdp-total').hide();$(".pdp-totals").find("#pdp-savings").hide();}
$('.overlay-container').hide();})
let stockAvail=$('.loos span').text().trim();let pkgInput=$('.product-brand').find('.pkg-input').val();let pdpQty=$('.pdp .js-quantity').val();$('.product-brand .qty-selector').find('.pkg-input').val(pdpQty);if(!(stockAvail==='')&&(pkgInput>0)){$('.product-brand').find('.pkg-input').attr('disabled',true);$('.product-brand').find('#addToCartButton').prop('disabled',true);}else{$('.product-brand').find('.pkg-input').attr('disabled',false);$('.product-brand').find('#addToCartButton').prop('disabled',false);}
if(pkgInput==='0'||pkgInput===''){$('.pdp-totals').find('#pdp-total').hide();$(".pdp-totals").find("#pdp-savings").hide();}
function publicPriceValue(){var cmsSiteID=$("#cmsCurrentSiteID").val();let publicPrice=$(".pdp-price").parents(".pdp-totals").find(".ch-pdpdetailvalue").text().trim();if(publicPrice>0){if(cmsSiteID=='ch'){let formattedPublicPrice=Number(publicPrice).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');$(".pdp-price").parents(".pdp-totals").find(".ch-pdpdetailvalue").text(formattedPublicPrice);$(".pdp-price").parents(".pdp-totals").find(".ch-pdpdetailvalue").prepend("CHF ");}}}
function productValue(){let contPrice=$('.pdp-totals').find('.pdp-contractPrice').text().trim();let catalogPrice=$('.pdp-totals').find('.pdp-catalogPrice').text().trim();let result=catalogPrice-contPrice;let pkgInput=$('.product-brand').find('.pkg-input').val();if((pkgInput==='')||(pkgInput<1)||!(stockAvail==='')){if(!(stockAvail==='')){$('.product-brand').find('#addToCartButton').prop('disabled',true);$('.product-brand').find('.pkg-input').attr('disabled',true);}else{$('.product-brand').find('#addToCartButton').prop('disabled',true);$('.product-brand').find('.pkg-input').attr('disabled',false);$('.product-brand').find('.pkg-alert').removeClass('d-none');}}else{$('.product-brand').find('#addToCartButton').prop('disabled',false);$('.product-brand').find('.pkg-alert').addClass('d-none');}
if(!(pkgInput==='')&&pkgInput>0){if(contPrice==='0.0'||result===0){$('.pdp-totals').find('#pdp-total').show();}else{$('.pdp-totals').find('#pdp-total').show();$(".pdp-totals").find("#pdp-savings").show();}}else{$('.pdp-totals').find('#pdp-total').hide();$(".pdp-totals").find("#pdp-savings").hide();}}
productValue();$(".product-brand .pkg-input:input").on("keyup change",function(e){productValue();});$('.learnMore').attr('disabled',false);$(".learnMore").click(function(){$("#learn-more-express-shipping").hide();$(this).parents('#learn-more-express-shipping').removeClass('in');$('.modal-backdrop').remove();return false;});$('.js-credit-card-expired').attr('disabled',false);$(".js-credit-card-expired").click(function(){$("#payment_creditCard").prop('selectedIndex',0);$("#credit-card-expired").modal('hide');$(this).parents('#credit-card-expired').removeClass('in');$('.modal-backdrop').remove();return false;});$("#credit-card-expired .ok_btn").click(function(){$("#payment_creditCard").prop('selectedIndex',0);});$(".my-cart-qnty").each(function(){$(this).on("keyup",function(){$('.overlay-container').show();let quantity=$(this).val();$(this).val(setValidProdQty(quantity));$('.overlay-container').hide();});});cartSavings();$(".pkg-input.my-cart-qnty").each(function(){$(this).on("keyup",function(){cartSavings();});})
function cartSavings(){var cmsSiteID=$("#cmsCurrentSiteID").val();var cart_list=$('.item__list__us').find('.item__list--item');var totalSavings=0;var formattedTotalSavings=0;$(cart_list).each(function(){let cartCatalogPrice=$(this).find('.cartCatalogPrice').val();let cartContractPrice=$(this).find('.cartContractPrice').val();let qty=$(this).find('.entryQuantity').val();let cartSavings=(cartCatalogPrice-cartContractPrice)*qty;if(cmsSiteID=='de'){var formattedcartSavings=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(cartSavings);}else{var formattedcartSavings=cartSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');}
let pac2Doses=qty*10;$(this).find('.pac2Doses span').text(pac2Doses);$(this).find('.cartSavings span').text(formattedcartSavings);if(formattedcartSavings==0){$(this).find('.cartSavings').text(formattedcartSavings).hide();}
totalSavings+=parseFloat(formattedcartSavings.replace(",",""));if(totalSavings>0){if(cmsSiteID=='cl'){var savingsFormat=totalSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');formattedTotalSavings=savingsFormat.substring(0,savingsFormat.length-3);$(".cart-summary .cart-totals").find('#savingsTotal').text(formattedTotalSavings);}else if(cmsSiteID=='de'){formattedTotalSavings=new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(totalSavings);$(".cart-summary .cart-totals").find('#savingsTotal').text(formattedTotalSavings);}else{var savingsFormat=totalSavings.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,'$&,');$(".cart-summary .cart-totals").find('#savingsTotal').text(savingsFormat);}
$(".savings-us-total").show();}else{$(".savings-us-total").hide();}});}
$(".format-price-tax").each(function(){})
$('.saveCart_popup .modal-header').find('.btn-close').attr('disabled',false);$('.delete_cart .modal-header').find('.btn-close').attr('disabled',false);$(".del_myprl,.remove-item-link").on("click",function(e){$('#delete-saved-cart').modal('show');});$(".cancel_btn").on("click",function(e){$(this).parents('.modal.fade').modal('hide');});$(".cancelBtn").on("click",function(e){$('#cancelSaveCartButton').trigger('click');});$(".remove-item-link").on("click",function(e){qtyTotal();$('#delete-saved-cart').modal('show');setTimeout(function(){if($('#delete-saved-cart').is(':visible')){$('#colorbox').find('.del_confirm').appendTo('.del_myprdl');$('#colorbox').css('display','none');}},200);});var cmsSiteID=$("#cmsCurrentSiteID").val();    if((cmsSiteID=='us'||cmsSiteID=='usmo')){        $('body').find('#colorbox').attr('tabindex','');   }
$(document).on('click','.save_Cart',function(e){qtyTotal();$('body').find('#colorbox').css('display','block');$('.saveCart_popup').modal('show');setTimeout(function(){if($('.saveCart_popup').is(':visible')){$('#colorbox').find('#saveCart').appendTo('.savecart-popup');$('#saveCartName').trigger("click");}},1000);});$(".sku-quantity").on("keyup",function(e){let value=e.target.value;let isNumber=/^\+?(0|[1-9]\d*)$/.test(value);let quantity=$(this).val();if(!isNumber){this.value=this.value.replace(/[^0-9]/g,'');}
if($(this).val()>0){$('.add_cart_btn').find('button').prop('disabled',true);}else{$('.add_cart_btn').find('button').prop('disabled',false);}
$(this).val(setValidProdQty(quantity));qtyTotal();});$(document).click(function(e){var prod_Qty=$(".sku-quantity");var prodQtyBtn=$(".save_Cart");if((!prod_Qty.is(e.target)&&prod_Qty.has(e.target).length===0)&&(!prodQtyBtn.is(e.target)&&prodQtyBtn.has(e.target).length===0)){qtyTotal();}});qtyTotal();function qtyTotal(){var total=0;$('.sku-quantity').each(function(){total+=parseInt(this.value,10)||0;$('.product-qty').html(total);var saveListValue=false;if((!saveListValue)&&(total<=0)||(total==NaN)||(total=="")||(total==undefined)){$('.add_cart_btn').find('button').prop('disabled',true);}else{saveListValue=true;$('.add_cart_btn').find('button').prop('disabled',false);}});}
$('[data-toggle="tooltip"]').tooltip();$('#carousel-example-generic').find(".carousel-inner > .item:first").addClass("active");$('#carousel-example-generic').carousel();    $('.carousel .item').each(function(){      var next=$(this).next();      if(!next.length){        next=$(this).siblings(':first');     }
      next.children(':first-child').clone().appendTo($(this));      for(var i=0;i<2;i++){        next=next.next();        if(!next.length){            next=$(this).siblings(':first');         }
        next.children(':first-child').clone().appendTo($(this));     }
   });});$(" .pdp-us-qty-input").on("keyup",function(){let val=$(this).val();$('.add_to_cart_form').find('.js-list-qty-selector-input').val(val);});$(".pdp-totals .btn-pdp").on("click",function(){$('.overlay-container').show();let not_Auth=$(this).parents('.pdp-totals').find('.pdp-contractPrice').text();let auth_plp=$(this).parents('.pdp-totals').find('.pdp-contractPrice.hide').text();let loos_stockPrice=$(this).parents('.pdp-totals').find('.stock-price').text().trim();let thisValue=$(this);var cmsSiteID=$("#cmsCurrentSiteID").val();var currencySymbol=$("#currentSiteCurrencySymbol").val();var intervalTime=setInterval(function(){if($('#add-to-cart-us').is(':visible')){$('.cart_popup_error_msg').css('display','none');if((not_Auth=='Not Authorized')&&(loos_stockPrice=='')){$('#add-to-cart-us').find('.cart-popup').removeClass('hide');$('#add-to-cart-us').find('.add-to-cart-button button').addClass('diabled-btn');$('#add-to-cart-us').find('.add-to-cart-button').css("pointer-events","none");$('#add-to-cart-us').find('.add-to-cart-button button').prop('disabled',true);$('#add-to-cart-us').parents('#colorbox').find('#cboxTitle .headline-text').hide();}else if(auth_plp=='Not Authorized'){$('#add-to-cart-us').find('.cart-popup').addClass('hide');$('#add-to-cart-us').find('.add-to-cart-button button').removeClass('diabled-btn');$('#add-to-cart-us').find('.add-to-cart-button button').prop('disabled',false);}else{$('#add-to-cart-us').find('.cart-popup').addClass('hide');$('#add-to-cart-us').find('.add-to-cart-button button').removeClass('diabled-btn');$('#add-to-cart-us').find('.add-to-cart-button button').prop('disabled',false);$('#add-to-cart-us').parents('#colorbox').find('#cboxTitle .headline-text').hide();}
$('.overlay-container').hide();clearInterval(intervalTime);}},50);});usSiteTotalCartItems();function totalCartItems(){var cartTotalItemsUrl=ACC.config.encodedContextPath+'/home-page/cartItems';$.ajax({url:cartTotalItemsUrl,cache:false,type:'GET',success:function(data){if(!isNaN(data)){$(".total-cart-items").text(data);}
else{$(".total-cart-items").text(0);}},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});}
function usSiteTotalCartItems(){totalCartItems();}
$(".cart-saveCart-popUp").on("click",function(e){$("#msdAddToCartOrderForm #saveCartNameUs").val('');$("#msdAddToCartOrderForm #saveCartDescriptionUs").val('');$("#saveCartMsgUs").removeClass('show');$('#saveCart_popup').modal('show');$("#msdAddToCartOrderForm #saveCartButtonUs").prop('disabled',true);$("#msdAddToCartOrderForm #code").find('option').eq(0).prop('selected',true);setTimeout(function(){if($('#saveCart_popup').is(':visible')){$('#saveCartNameUs').trigger("click");$('#colorbox').find('#saveCart').appendTo('#saveCart_popup');$('#colorbox').css('display','none');}},1000);});$('#saveCartNameUs').keyup(function(){if($(this).val().length>0){$('#saveCartButtonUs').prop('disabled',false);}else{$('#saveCartButtonUs').prop('disabled',true);}});$("#msdAddToCartOrderForm #code").on("change",function(){var saveCartCode=$("#msdAddToCartOrderForm #code").find(":selected").data("code");if(saveCartCode==undefined){$("#msdAddToCartOrderForm #saveCartNameUs").val('');$("#msdAddToCartOrderForm #saveCartDescriptionUs").val('');if($("#msdAddToCartOrderForm #saveCartNameUs").val().length>0){$("#msdAddToCartOrderForm #saveCartButtonUs").prop('disabled',false);}else{$("#msdAddToCartOrderForm #saveCartButtonUs").prop('disabled',true);}}else{$("#msdAddToCartOrderForm #saveCartNameUs").val($(this).find(":selected").data("name"));$("#msdAddToCartOrderForm #saveCartDescriptionUs").val($(this).find(":selected").data("desc"));if($("#msdAddToCartOrderForm #saveCartNameUs").val().length>0){$("#msdAddToCartOrderForm #saveCartButtonUs").prop('disabled',false);}else{$("#msdAddToCartOrderForm #saveCartButtonUs").prop('disabled',true);}}});$('.js-save-order-form-btn-us').click(function(){var form=$('#msdAddToCartOrderForm');$.ajax({type:"post",url:ACC.config.encodedContextPath+'/usCart/saveMyProductList',data:form.serialize(),success:function(result){if(result=='success'){$("#saveCartMsgUs").removeClass('hide');$('#saveCart_popup').modal('hide');}else if(result=='errorMsg'){$("#saveCartMsgError").removeClass('hide');$('#saveCart_popup').modal('hide');}},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});})
$('.cartProductListClose').click(function(){$("#saveCartMsgUs").addClass('hide');$("#saveCartMsgErrorUs").addClass('hide');})
$("#cartCode").on("change",function(){var saveCartCode=$(this).val();if(saveCartCode=='newcart'){$("#saveCartName").val('');$("#saveCartDescription").empty();if($("#saveCartName").val().length>0){$("#saveCartButton").prop('disabled',false);}else{$("#saveCartButton").prop('disabled',true);}}else{$("#saveCartName").val($('#cartCode').find(":selected").data("name"));$("#saveCartDescription").text($(this).find(":selected").data("desc"));if($("#saveCartName").val().length>0){$("#saveCartButton").prop('disabled',false);}else{$("#saveCartButton").prop('disabled',true);}}});$('#cartCode').on('click',function(){event.stopPropagation();})
$(document).ready(function(){$("#complexAccountPopup #customerID").on("keyup",function(){$('#button2').prop('disabled',false);});$('.checkout-next').on("click",function(e){e.preventDefault();localStorage.setItem('jumpToScrollPostion',window.pageYOffset);var url=window.location.origin+window.location.pathname;window.location=url;});if($('.checkout')){if(localStorage.getItem('jumpToScrollPostion')!=="undefined"){var jumpTo=localStorage.getItem('jumpToScrollPostion');window.scrollTo(0,jumpTo);localStorage.setItem('jumpToScrollPostion','undefined');}}
function colorBoxHide(){setTimeout(function(){var color_Box=$('body').find('#colorbox').css('display','block');if($(color_Box).is(':visible')){$('body').find('#colorbox').css('display','none');$('.selected-tracking-url').val('');}},500);}
$('#close, .forgottenPwdResetBtn, #js-password-forgotten').click(function(){colorBoxHide();});$('.complexAccountAddButton').click(function(){setTimeout(function(){if($('#complexAccountPopup').is(':visible')){$('#customerID').trigger("click");colorBoxHide();}},500);})
$('.shipToClose').click(function(){colorBoxHide();});$('.reset-pwd input').click(function(){colorBoxHide();});$('#saveCartName, #saveCartDescription').click(function(){colorBoxHide();});$(".rest-pwd-msg").on('click',function(){  $('.help-block').css('display','none');$('.reset-pwd').find('.form-group').removeClass('has-error');});$('#js-password-forgotten').click(function(event){        if(!$(event.target).closest(".login-section-main .modal,.login-section-main #forgot_pw").length){             $('.help-block').css('display','none');          $('.reset-pwd').find('.form-group').removeClass('has-error');       }});$("#lang-menu").hover(function(){$(this).addClass("cls-border-lang");$(this).children().eq(0).addClass("cls-borderbottom-lang");$("#lang-menu ul").css('display','block');},function(){$(this).removeClass("cls-border-lang");$(this).children().eq(0).removeClass("cls-borderbottom-lang");$("#lang-menu ul").css('display','none');});inputVal=$("#lang-menu ul li").find('input:checked').val();storeageVal=localStorage.getItem("lang");if(inputVal!=storeageVal){$("#lang-menu ul li input").each(function(){$(this).attr("checked",false)
$(this).removeAttr('id');currLang=$(this).val();if(currLang===storeageVal){$(this).trigger("click");$(this).attr('id','lang-selector');}})}
if(localStorage.getItem("lang")){$('#lang-menu').find('.selected-lang').html(localStorage.getItem("lang"));}else{localStorage.setItem("lang","en");$('#lang-menu').find('.selected-lang').html(localStorage.setItem("lang","en"));}
$("#lang-menu ul li").on("click",function(){$(this).find('input').prop("checked",true);$lang=$(this).text();langVal=$(this).find('input:checked').val();$("#lang-menu .selected-lang").text($lang);localStorage.setItem("lang",langVal);});$('#signout').on('click',function(){localStorage.setItem("lang","en");$('#lang-menu').find('.selected-lang').html(localStorage.setItem("lang","en"));})
$("ul.navbar-nav li.nav-item").each(function(){        if($(this).find("a").text().trim()!=""){ 
       }else{            $(this).hide();       }
   });$('.tracking-info').on('click',function(e){e.preventDefault;var _this=$(this);var trackingNumber=_this.text().trim();$('.selected-tracking-url').val('').val(trackingNumber);$(_this).addClass('active').siblings().removeClass('active');_this.parents('.line-track-data').find('.tracking-no-modal').modal("show");})
$('.tracking_url').click(function(e){e.preventDefault;var url='',url=$('.tracking-info.active').find('.tracking-url').val();window.open(url);colorBoxHide();});$(document).on('click','.tracking-popup,.cancelbtn,.ok_btn',function(){colorBoxHide();});$('.orderBackBtn button').on('click',function(){$('.overlay-container').show();});$(document).on("click","#siteAcknowledgeContinue",function(e){e.preventDefault();var siteAcknowledge=true;var submitSiteAcknowledge=ACC.config.encodedContextPath+'/home-page/sendAcknowledgeMent?siteAcknowledge='+siteAcknowledge;$.ajax({type:'POST',url:submitSiteAcknowledge,success:function(data){window.location.href=ACC.config.encodedContextPath;},error:function(err){console.log('err',err);}})})
var cmsSiteID=$("#cmsCurrentSiteID").val();if(cmsSiteID=='us'||cmsSiteID=='usmo'){colorBoxHide();}
$("a.invoice").click(function(e){e.preventDefault();var invoiceUrl=$(this).find('span.ccpRedirect').text();var logoutURL=ACC.config.ccpLogoutUrl;var timeOutTime=ACC.config.ccpTimeout;ccpwindow=window.open(logoutURL,"ccpwindowtab");setTimeout(function(){ccpwindow.location.href=invoiceUrl},timeOutTime);})
$("a.invoice-link, .paymentWindow a").click(function(e){e.preventDefault();var invoiceUrl=$(this).prop('href');var logoutURL=ACC.config.ccpLogoutUrl;var timeOutTime=ACC.config.ccpTimeout;ccpwindow=window.open(logoutURL,"ccpwindowtab");setTimeout(function(){ccpwindow.location.href=invoiceUrl},timeOutTime);})
$(".status").click(function(){var statusUrl=$(this).find('span').text();window.open(statusUrl,"newwindow","width=800,height=520");})
$(".opt-in").click(function(){var optInUrl=$(this).find('span').text();window.open(optInUrl,"newwindow","width=800,height=520");})
$(".opt-out").click(function(){var optOutUrl=$(this).find('span').text();window.open(optOutUrl,"newwindow","width=800,height=520");})});function setValidProdQty(quantity){var cmsSiteID=$("#cmsCurrentSiteID").val();var validProdQtyUs=ACC.config.validProdQtyUs;var validProdQtyGlobal=ACC.config.validProdQtyGlobal;if(isNullUndefinedEmpty(quantity)){if(cmsSiteID=='us'||cmsSiteID=='usmo'){if(parseInt(quantity)>parseInt(validProdQtyUs)){return validProdQtyUs;}
return quantity;}else{if(parseInt(quantity)>parseInt(validProdQtyGlobal)){return validProdQtyGlobal;}
return quantity;}}
return"";};ACC.checkoutsummary={_autoload:["bindAllButtons","bindScheduleReplenishment","replenishmentInit"],bindAllButtons:function()
{ACC.checkoutsummary.toggleActionButtons('.place-order-form');},toggleActionButtons:function(selector){var cssClass=$(document).find(selector);var checkoutBtns=cssClass.find('.checkoutSummaryButton');var checkBox=cssClass.find('input[name=termsCheck]')
if(checkBox.attr('checked')){checkoutBtns.prop('disabled',false);}
checkBox.on('click',function(){var checked=$(this).prop('checked');if(checked){checkoutBtns.prop('disabled',false);}else{checkoutBtns.prop('disabled',true);}});},validateDate:function(date,dateFormat){var validDate=true;try{$.datepicker.parseDate(dateFormat,date);}catch(err){validDate=false;}
return validDate;},toggleReplenishmentScheduleDateError:function(showError){if(showError){var datePickerElem=$('#replenishmentSchedule .datepicker');if(!datePickerElem.hasClass('has-error')){datePickerElem.addClass('has-error');}
$('#errorReplenishmentStartDate').show();}else{$('#replenishmentSchedule .datepicker').removeClass('has-error');$('#errorReplenishmentStartDate').hide();}},bindScheduleReplenishment:function(data)
{var form=$('#placeOrderForm1');var placeReplenishment=false;$(document).on("click",".scheduleReplenishmentButton",function(e){e.preventDefault();var termChecked=$(this).closest("form").find('input[name=termsCheck]').is(':checked');form.find('input[name=termsCheck]').prop('checked',termChecked);var titleHtml=$('.scheduleReplenishmentButton').first().html();ACC.colorbox.open(titleHtml,{href:"#replenishmentSchedule",inline:true,width:"620px",onComplete:function(){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$(this).colorbox.resize();placeReplenishment=false;},onClosed:function(){if(placeReplenishment){form.submit();}
$(".replenishmentOrderClass").val(false);}});$("input:radio[name=replenishmentRecurrence]").click(function(){if($("#replenishmentStartDate").val()!=''){$('#replenishmentSchedule .js-replenishment-actions').show();}
switch(this.value)
{case"DAILY":$('.scheduleformD').show();$('.scheduleformW').hide();$('.scheduleformM').hide();break;case"WEEKLY":$('.scheduleformD').hide();$('.scheduleformW').show();$('.scheduleformM').hide();break;default:$('.scheduleformD').hide();$('.scheduleformW').hide();$('.scheduleformM').show();};$.colorbox.resize();});});$(document).on("click",'#replenishmentSchedule #cancelReplenishmentOrder',function(e){e.preventDefault();$(".replenishmentOrderClass").val(false);$.colorbox.close();});$(document).on("click",'#replenishmentSchedule #placeReplenishmentOrder',function(e){e.preventDefault();var localeDateFormat=$('#replenishmentSchedule').data('dateForDatePicker');var dateEntered=$("#replenishmentStartDate").val();if(ACC.checkoutsummary.validateDate(dateEntered,localeDateFormat)){$(".replenishmentOrderClass").val(true);placeReplenishment=true;$.colorbox.close();}else{ACC.checkoutsummary.toggleReplenishmentScheduleDateError(true);$.colorbox.resize();}});$(document).on("change",'#replenishmentStartDate',function(e){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$.colorbox.resize();});$(document).on("click",'#replenishmentSchedule .js-open-datepicker',function(){$('#replenishmentSchedule .hasDatepicker').datepicker('show');});},replenishmentInit:function()
{var placeOrderFormReplenishmentOrder=$('#replenishmentSchedule').data("placeOrderFormReplenishmentOrder");var placeOrderFormReplenishmentRecurrence=$('#replenishmentSchedule').data("placeOrderFormReplenishmentRecurrence");var dateForDatePicker=$('#replenishmentSchedule').data("dateForDatePicker");var placeOrderFormNDays=$('#replenishmentSchedule').data("placeOrderFormNDays");var placeOrderFormNthDayOfMonth=$('#replenishmentSchedule').data("placeOrderFormNthDayOfMonth");if(placeOrderFormReplenishmentOrder===undefined){return;}
if(!placeOrderFormReplenishmentOrder){$('#replenishmentSchedule .js-replenishment-actions').hide();$("input:radio[name='replenishmentRecurrence'][value=DAILY]").prop('checked',false);$('.scheduleformD').hide();$("#nDays option[value="+placeOrderFormNDays+"]").attr('selected','selected');$("input:radio[name='replenishmentRecurrence'][value=WEEKLY]").prop('checked',false);$('.scheduleformW').hide();$("input:radio[name='replenishmentRecurrence'][value=MONTHLY]").prop('checked',false);$('.scheduleformM').hide();if(placeOrderFormNthDayOfMonth!='')
$("#nthDayOfMonth option[value="+placeOrderFormNthDayOfMonth+"]").attr('selected','selected');$("#replenishmentStartDate").val("");}
else{switch(placeOrderFormReplenishmentRecurrence)
{case"DAILY":$('.scheduleformD').show();break;case"WEEKLY":$('.scheduleformW').show();break;default:$('.scheduleformM').show();};}
$(".js-replenishment-datepicker").datepicker({dateFormat:dateForDatePicker,onClose:function(){if($(this).val()==''){$('#replenishmentSchedule .js-replenishment-actions').hide();}
else{if($("input:radio[name=replenishmentRecurrence]").is(':checked')){$('#replenishmentSchedule .js-replenishment-actions').show();$.colorbox.resize();}}}});}};ACC.checkoutsummary={_autoload:["bindAllButtons",],bindAllButtons:function()
{ACC.checkoutsummary.toggleActionButtons('.place-order-form');ACC.checkoutsummary.toggleActionButtonsGlobal('.msd-place-order-form');},toggleActionButtons:function(selector){var cssClass=$(selector);var checkoutBtns=cssClass.find('.checkoutSummaryButton');var checkBox=cssClass.find('input[name=termsCheck]')
var selfCheck=cssClass.find('input[name=selfCheck]')
if(checkBox.attr('checked')){checkoutBtns.prop('disabled',false);}
var flag1=false;var flag2=false;selfCheck.on('click',function(){var checked=$(this).prop('checked');if(checked){flag2=true;if(flag1==true){checkoutBtns.prop('disabled',false);}}else{flag2=false;checkoutBtns.prop('disabled',true);}});if(selfCheck.is(':checked')){flag2=true;}
checkBox.on('click',function(){var checked=$(this).prop('checked');if(checked){flag1=true;if(flag2==true){checkoutBtns.prop('disabled',false);}}else{flag1=false;checkoutBtns.prop('disabled',true);}});},toggleActionButtonsGlobal:function(selector){var cssClass=$(selector);var checkoutBtns=cssClass.find('.checkoutSummaryButton');var termsCheck=cssClass.find('input[name=termsCheck]')
var orderDelay=cssClass.find('input[name=orderDelay]')
orderDelay.on('click',function(){var checked=$(this).prop('checked');if(checked){if(termsCheck.is(':checked')){checkoutBtns.prop('disabled',false);}else{checkoutBtns.prop('disabled',true);}}else{checkoutBtns.prop('disabled',true);}});termsCheck.on('click',function(){var checked=$(this).prop('checked');if(checked){checkoutBtns.prop('disabled',false);if(orderDelay.is(':visible')){if(orderDelay.is(':checked')){checkoutBtns.prop('disabled',false);}else{checkoutBtns.prop('disabled',true);}}}else{checkoutBtns.prop('disabled',true);}});},validateDate:function(date,dateFormat){var validDate=true;try{$.datepicker.parseDate(dateFormat,date);}catch(err){validDate=false;}
return validDate;},toggleReplenishmentScheduleDateError:function(showError){if(showError){var datePickerElem=$('#replenishmentSchedule .datepicker');if(!datePickerElem.hasClass('has-error')){datePickerElem.addClass('has-error');}
$('#errorReplenishmentStartDate').show();}else{$('#replenishmentSchedule .datepicker').removeClass('has-error');$('#errorReplenishmentStartDate').hide();}},bindScheduleReplenishment:function(data)
{var form=$('#placeOrderForm1');var placeReplenishment=false;$(document).on("click",".scheduleReplenishmentButton",function(e){e.preventDefault();var termChecked=$(this).closest("form").find('input[name=termsCheck]').is(':checked');form.find('input[name=termsCheck]').prop('checked',termChecked);var selfChecked=$(this).closest("form").find('input[name=replenishmentOrder]').is(':checked');form.find('input[name=replenishmentOrder]').prop('checked',selfChecked);var title=$('.scheduleReplenishmentButton').first().text().trim();ACC.colorbox.open(title,{href:"#replenishmentSchedule",inline:true,width:"620px",onComplete:function(){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$(this).colorbox.resize();placeReplenishment=false;},onClosed:function(){if(placeReplenishment){form.submit();}
$(".replenishmentOrderClass").val(false);}});$("input:radio[name=replenishmentRecurrence]").click(function(){if($("#replenishmentStartDate").val()!=''){$('#replenishmentSchedule .js-replenishment-actions').show();}
switch(this.value)
{case"DAILY":$('.scheduleformD').show();$('.scheduleformW').hide();$('.scheduleformM').hide();break;case"WEEKLY":$('.scheduleformD').hide();$('.scheduleformW').show();$('.scheduleformM').hide();break;default:$('.scheduleformD').hide();$('.scheduleformW').hide();$('.scheduleformM').show();};$.colorbox.resize();});});$(document).on("click",'#replenishmentSchedule #cancelReplenishmentOrder',function(e){e.preventDefault();$(".replenishmentOrderClass").val(false);$.colorbox.close();});$(document).on("click",'#replenishmentSchedule #placeReplenishmentOrder',function(e){e.preventDefault();var localeDateFormat=$('#replenishmentSchedule').data('dateForDatePicker');var dateEntered=$("#replenishmentStartDate").val();if(ACC.checkoutsummary.validateDate(dateEntered,localeDateFormat)){$(".replenishmentOrderClass").val(true);placeReplenishment=true;$.colorbox.close();}else{ACC.checkoutsummary.toggleReplenishmentScheduleDateError(true);$.colorbox.resize();}});$(document).on("change",'#replenishmentStartDate',function(e){ACC.checkoutsummary.toggleReplenishmentScheduleDateError(false);$.colorbox.resize();});$(document).on("click",'#replenishmentSchedule .js-open-datepicker',function(){$('#replenishmentSchedule .hasDatepicker').datepicker('show');});},replenishmentInit:function()
{var placeOrderFormReplenishmentOrder=$('#replenishmentSchedule').data("placeOrderFormReplenishmentOrder");var placeOrderFormReplenishmentRecurrence=$('#replenishmentSchedule').data("placeOrderFormReplenishmentRecurrence");var dateForDatePicker=$('#replenishmentSchedule').data("dateForDatePicker");var placeOrderFormNDays=$('#replenishmentSchedule').data("placeOrderFormNDays");var placeOrderFormNthDayOfMonth=$('#replenishmentSchedule').data("placeOrderFormNthDayOfMonth");if(placeOrderFormReplenishmentOrder===undefined){return;}
if(!placeOrderFormReplenishmentOrder){$('#replenishmentSchedule .js-replenishment-actions').hide();$("input:radio[name='replenishmentRecurrence'][value=DAILY]").prop('checked',false);$('.scheduleformD').hide();$("#nDays option[value="+placeOrderFormNDays+"]").attr('selected','selected');$("input:radio[name='replenishmentRecurrence'][value=WEEKLY]").prop('checked',false);$('.scheduleformW').hide();$("input:radio[name='replenishmentRecurrence'][value=MONTHLY]").prop('checked',false);$('.scheduleformM').hide();if(placeOrderFormNthDayOfMonth!='')
$("#nthDayOfMonth option[value="+placeOrderFormNthDayOfMonth+"]").attr('selected','selected');$("#replenishmentStartDate").val("");}
else{switch(placeOrderFormReplenishmentRecurrence)
{case"DAILY":$('.scheduleformD').show();break;case"WEEKLY":$('.scheduleformW').show();break;default:$('.scheduleformM').show();};}
$(".js-replenishment-datepicker").datepicker({dateFormat:dateForDatePicker,onClose:function(){if($(this).val()==''){$('#replenishmentSchedule .js-replenishment-actions').hide();}
else{if($("input:radio[name=replenishmentRecurrence]").is(':checked')){$('#replenishmentSchedule .js-replenishment-actions').show();$.colorbox.resize();}}}});}};$(document).ready(function(){var All=ACC.allDropDownValue;var orderDropDown=ACC.oHorderDropDown;var orderHash=ACC.oHOrderDropDown;var purchaseOrder=$("#poNumber").val();var allStatus=ACC.allDropDownValue;var allShipTo=ACC.oHAll;var ordersNotFoundMsg=ACC.ordersNotFoundMessage;var showing=ACC.paginationShowing;var ofmsg=ACC.paginationOf;var entries=ACC.paginationEntries;window.history.replaceState('','',window.location.href);setOrderIdInLocaStorage();setDefaultValuesInSubmitForm();if($("#selectedShipToId").val()!=""){$("#OHselectShipToUS option").each(function(){if($(this).val()==$("#selectedShipToId").val()){$(this).prop("selected","selected");}else{$(this).removeAttr("selected");}})}else{$("#OHselectShipToUS option").eq(0).prop("selected","selected");}
var selectDate=new Object();selectDate['Monate']='Months';selectDate['Tage']='Days';selectDate['mesi']='Months';selectDate['giorni']='Days';selectDate['mois']='Months';selectDate['jours']='Days';selectDate['meses']='Months';selectDate['dias']='Days';selectDate['Months']='Months';selectDate['Days']='Days';if($("#oh-date").find("option:selected").length>0&&!$("#todayDate").val()&&!$("#calculatedDate").val()){if($("#oh-date").find("option:selected").val()!=2&&($("#oh-date").find("option:selected").val()!=3)){if($("#lang-form input:radio[lang=de]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=it]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=en]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=fr]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[0],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=es]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}
$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment().format("YYYYMMDD"));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",calcDate);}else if($("#oh-date").find("option:selected").val()==2){$("#MsdOrderHistoryForm").find("#todayDate").attr("value","");$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value","");}else if($("#oh-date").find("option:selected").val()==3){$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment().format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",moment().format('YYYYMMDD'));}}
$(document).on("change","#OHselectShipToUS",function(e){$('.overlay-container').show();var formShipTo=this.value.indexOf(All)>-1?'':this.value;$('#MsdOrderHistoryForm').submit();});if($(".page-orders").length>0){$.fn.DataTable.ext.pager.numbers_length=5;jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-uk-pre":function(a){var ukDate=a.split('.');return(ukDate[2]+ukDate[1]+ukDate[0])*1;},"date-uk-asc":function(a,b){return((a<b)?-1:((a>b)?1:0));},"date-uk-desc":function(a,b){return((a<b)?1:((a>b)?-1:0));}});function getDateFormat(){if($("html").attr("lang")=="de"){return"date-uk";}
return"date";}
var orderHistoryDataTable=$("table.responsive-table").DataTable({searching:false,columnDefs:[{"orderable":false,"targets":"_all"},{"targets":7,"type":getDateFormat()}],order:[7,'desc'],pageLength:20,bLengthChange:false,pagingType:"simple_numbers_no_ellipses",language:{paginate:{next:"<span class='fa fa-chevron-right'></span>",previous:"<span class='fa fa-chevron-left'></span>"},info:"_START_ - _END_ of _TOTAL_ Orders"},fnDrawCallback:function(results){$(".page-orders").find(".pagination-bar-results").html($(".page-orders").find(".dataTables_info"));},initComplete:function(){$(".page-orders").find(".dataTables_paginate").appendTo(".pagination-bar.top .pagination-wrap");}});}
$(".page-orders #sortOptions1").on("change",function(){if($(this).val()=="createdOn"){orderHistoryDataTable.order([7,'desc']).draw();}else if($(this).val()=="poNumber"){orderHistoryDataTable.order([1,'desc']).draw();}})
$("#oh-date").change(function(e){if($(this).val()==="sp-dates"){$("#sp-from-date-panel").removeClass("d-none");$("#sp-to-date-panel").removeClass("d-none");$("#sp-search-panel").removeClass("d-none");}else{$("#sp-from-date-panel").addClass("d-none");$("#sp-to-date-panel").addClass("d-none");$("#sp-search-panel").addClass("d-none");}});var oHDateConversion=$("#oHDateConversion").val();$("#sp-from-date").datepicker({dateFormat:$("#oHDateFormat").val(),maxDate:"0",onSelect:function(date){var a=moment(date,oHDateConversion).add(18,'Months');var b=moment();$("#sp-to-date").datepicker("option","maxDate",b.diff(a,'months')>0?moment(date).add(18,'months').format(oHDateConversion):'0');$("#sp-to-date").datepicker("option","minDate",date);if($("#sp-to-date").val()&&$("#sp-from-date").val()){$(".OH-specificDates").attr("disabled",false);}}});$("#sp-to-date").datepicker({dateFormat:$("#oHDateFormat").val(),maxDate:"0",onSelect:function(date){$("#sp-from-date").datepicker("option","minDate",moment(date,oHDateConversion).subtract(18,'Months').format(oHDateConversion));if($("#sp-to-date").val()&&$("#sp-from-date").val()){$(".OH-specificDates").attr("disabled",false);}}});$(".oh-grid-head").click(function(){if(!$(this).hasClass("active")){$(".oh-grid-head").removeClass("active");$(this).addClass("active");$(this).addClass("asc");$(this).removeClass("desc");}else{if($(this).hasClass("asc")){$(this).addClass("desc");$(this).removeClass("asc");}else{$(this).addClass("asc");$(this).removeClass("desc");}}})
if($("#search-select").find(":selected").text().trim()==orderDropDown){$(".oh-search-box").attr("placeholder",orderHash);}else{$(".oh-search-box").attr("placeholder",purchaseOrder);}
$("#search-select").change(function(){$(".oh-search-box").val("");if($("#search-select").find(":selected").text().trim()==orderHash){$(".oh-search-box").attr("placeholder",orderHash);}else{$(".oh-search-box").attr("placeholder",purchaseOrder);}});var char='#';var cmsSiteID=$("#cmsCurrentSiteID").val();if(cmsSiteID!=='cl'){$('#search-select option').append(char);}
$(document).on("click",".orderHistorySubmitUS",function(e){if(localStorage.getItem('selectedOrderId')!==null){localStorage.removeItem('selectedOrderId');}
$('.overlay-container').show();e.preventDefault();if($("#search-box").val()==''){$("#oh-date").val('1');}
if($("#search-box").val()!==''){$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);$("#MsdOrderHistoryForm").find("#todayDate").attr("value","");$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value","");}
$('#MsdOrderHistoryForm').submit();})
$(document).on("keyup","#search-box",function(e){if(localStorage.getItem('selectedOrderId')!==null){localStorage.removeItem('selectedOrderId');}
e.preventDefault();if($("#search-box").val()==''){$("#oh-date").val('1');}
$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);if(e.which==13){$('#MsdOrderHistoryForm').submit();}})
function callBack(arg1){if(arg1.api().page.info().recordsDisplay<1){$(".page-orders").find(".OH-dataTableInfo .dataTables_paginate").addClass("hide");$(".page-orders").find(".OH-dataTable thead").addClass("hide");$(".page-orders").find(".tc-red").addClass("hide");}else{$(".page-orders").find(".OH-dataTableInfo .dataTables_paginate").removeClass("hide");$(".page-orders").find(".OH-dataTable thead").removeClass("hide");$(".page-orders").find(".tc-red").removeClass("hide");}}
function complete(arg2){$(".page-orders").find(".dataTables_wrapper .top").appendTo($(".page-orders").find("#MsdOrderHistoryForm .OH-dataTableInfo"));$(".page-orders").find(".dataTables_wrapper .bottom").appendTo($(".page-orders").find(".OH-dataTableInfo.bottom"));if(arg2.api().page.info().recordsDisplay<1){$(".page-orders").find(".OH-dataTableInfo .dataTables_paginate").addClass("hide");$(".page-orders").find(".OH-dataTable thead").addClass("hide");$(".page-orders").find(".tc-red").addClass("hide");}else{$(".page-orders").find(".OH-dataTableInfo .dataTables_paginate").removeClass("hide");$(".page-orders").find(".OH-dataTable thead").removeClass("hide");$(".page-orders").find(".tc-red").removeClass("hide");}}
var cmsSiteID=$("#cmsCurrentSiteID").val();if(cmsSiteID=='de'){var OHDataTable=$(".OH-dataTable").DataTable({searching:true,columnDefs:[{"targets":'5',"type":'formatted-num'}],ordering:true,order:[3,'desc'],pageLength:20,lengthChange:false,pagingType:"simple",dom:'<"top"ip<"clear">>rt<"bottom"ip<"clear">>',"language":{paginate:{next:"<span class='fa fa-chevron-right'></span>",previous:"<span class='fa fa-chevron-left'></span>"},decimal:',',thousands:'.',info:showing+" <b> _START_ </b>- <b>_END_ </b>"+ofmsg+" <b>_TOTAL_</b> "+entries,infoFiltered:"",infoEmpty:"",emptyTable:ordersNotFoundMsg,zeroRecords:ordersNotFoundMsg},fnDrawCallback:function(){callBack(this);},initComplete:function(){complete(this);}});}else{var OHDataTable=$(".OH-dataTable").DataTable({searching:true,ordering:true,order:[3,'desc'],pageLength:20,lengthChange:false,pagingType:"simple",dom:'<"top"ip<"clear">>rt<"bottom"ip<"clear">>',language:{paginate:{next:"<span class='fa fa-chevron-right'></span>",previous:"<span class='fa fa-chevron-left'></span>"},info:showing+" <b> _START_ </b>- <b>_END_ </b>"+ofmsg+" <b>_TOTAL_</b> "+entries,infoFiltered:"",infoEmpty:"",emptyTable:ordersNotFoundMsg,zeroRecords:ordersNotFoundMsg},fnDrawCallback:function(){callBack(this);},initComplete:function(){complete(this);}});}
$(".OH-orderByStatus").on("change",function(){$('.overlay-container').show();var val=$(this).val().trim()==allStatus?'':$(this).val().trim();OHDataTable.column("2").search(val?'^'+$(this).val()+'$':val,true,false).draw();$('.overlay-container').hide();})
if($(".OH-orderByStatus").length>0&&$(".OH-orderByStatus").find(":selected").val().trim()!=allStatus){$('.overlay-container').show();var val=$(".OH-orderByStatus").find(":selected").val().trim();OHDataTable.column("2").search(val).draw();$('.overlay-container').hide();}
$("#oh-date").on("change",function(){var ohDate=$('#oh-date').find(":selected").val();if(ohDate==8){$('.overlay-container').hide();}
else{$('.overlay-container').show();}
$("#sp-from-date-panel").addClass("d-none");$("#sp-to-date-panel").addClass("d-none");$("#sp-search-panel").addClass("d-none");if($(this).find(":selected").val()!=2&&($(this).find(":selected").val()!=3)&&($(this).find(":selected").val()!=8)){if($("#lang-form input:radio[lang=de]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=it]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=en]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=fr]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[0],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}else if($("#lang-form input:radio[lang=es]").is(":checked")){var calcDate=moment().subtract($("#oh-date").find("option:selected").text().split(" ")[1],selectDate[$("#oh-date").find("option:selected").text().split(" ")[2]]).format("YYYYMMDD");}
$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment().add(1,'day').format("YYYYMMDD"));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",calcDate);$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#search-box").val("");$("#MsdOrderHistoryForm").find("#search-select").val(orderDropDown);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);$('#MsdOrderHistoryForm').submit();}else if(($(this).find(":selected").val()==8)){$("#sp-from-date-panel").removeClass("d-none");$("#sp-to-date-panel").removeClass("d-none");$("#sp-search-panel").removeClass("d-none");$("#sp-to-date").val("");$("#sp-from-date").val("");$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#search-box").val("");$("#MsdOrderHistoryForm").find("#search-select").val(orderDropDown);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);}else if($(this).find(":selected").val()==2){var calcDate=moment().subtract(18,'months').format('YYYYMMDD');$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment().format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",calcDate);$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#search-box").val("");$("#MsdOrderHistoryForm").find("#search-select").val(orderDropDown);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);$('#MsdOrderHistoryForm').submit();}else if($(this).find(":selected").val()==3){$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment().format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",moment().format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#search-box").val("");$("#MsdOrderHistoryForm").find("#search-select").val(orderDropDown);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);$('#MsdOrderHistoryForm').submit();}})
$(".OH-specificDates").on("click",function(e){e.preventDefault();$("#MsdOrderHistoryForm").find("#todayDate").attr("value",moment($("#sp-to-date").val(),oHDateConversion).format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#calculatedDate").attr("value",moment($("#sp-from-date").val(),oHDateConversion).format('YYYYMMDD'));$("#MsdOrderHistoryForm").find("#orderStatus").val(allStatus);$("#MsdOrderHistoryForm").find("#search-box").val("");$("#MsdOrderHistoryForm").find("#search-select").val(orderDropDown);$("#MsdOrderHistoryForm").find("#OHselectShipToUS").val(allShipTo);$('#MsdOrderHistoryForm').submit();})
if($("#oh-date").find(":selected").val()==8){$("#sp-from-date-panel").removeClass("d-none");$("#sp-to-date-panel").removeClass("d-none");$("#sp-search-panel").removeClass("d-none");$("#sp-from-date").attr('value',moment($("#MsdOrderHistoryForm").find("#calculatedDate").val(),'YYYYMMDD').format(oHDateConversion));$("#sp-to-date").attr('value',moment($("#MsdOrderHistoryForm").find("#todayDate").val(),'YYYYMMDD').format(oHDateConversion));}
$(".manage-user").DataTable({searching:true,ordering:true,order:[],pageLength:10,lengthChange:false,pagingType:"simple",dom:'<"top"ip<"clear">>rt<"bottom"ip<"clear">>',language:{paginate:{next:"<span class='fa fa-chevron-right'></span>",previous:"<span class='fa fa-chevron-left'></span>"},info:showing+" <b> _START_ </b>- <b>_END_ </b>"+ofmsg+" <b>_TOTAL_</b> "+entries,infoFiltered:"",infoEmpty:"",emptyTable:ordersNotFoundMsg,zeroRecords:ordersNotFoundMsg},fnDrawCallback:function(settings){if(this.api().page.info().recordsDisplay<1){$(".user-section").find(".OH-dataTableInfo .dataTables_paginate").addClass("hide");$(".user-section").find(".manage-user thead").addClass("hide");$(".user-section").find(".tc-red").addClass("hide");}else{$(".user-section").find(".OH-dataTableInfo .dataTables_paginate").removeClass("hide");$(".user-section").find(".manage-user thead").removeClass("hide");$(".user-section").find(".tc-red").removeClass("hide");}},initComplete:function(){$(".page-my-company").find(".dataTables_wrapper .top").appendTo($(".user-section").find(" .OH-dataTableInfo.top"));$(".user-section").find(".dataTables_wrapper .bottom").appendTo($(".user-section").find(".OH-dataTableInfo.bottom"));if(this.api().page.info().recordsDisplay<1){$(".user-section").find(".OH-dataTableInfo .dataTables_paginate").addClass("hide");$(".user-section").find(".manage-user thead").addClass("hide");$(".user-section").find(".tc-red").addClass("hide");}else{$(".user-section").find(".OH-dataTableInfo .dataTables_paginate").removeClass("hide");$(".user-section").find(".manage-user thead").removeClass("hide");$(".user-section").find(".tc-red").removeClass("hide");}}});$("#filter").on('change',function(){if($(this).val()==2){table.order([0,'asc']).draw();}else if($(this).val()==3){table.order([2,'asc']).draw();}});function symbol(){OHcurrencyAddition();}
symbol();$(document).on('click','.symbol',function(){symbol();})
$('.OH-dataTable th').click(function(){OHcurrencyAddition();})
function OHcurrencyAddition(){var symbol=$('#currentSiteCurrencySymbol').val();var cmsSiteID=$("#cmsCurrentSiteID").val();$('.OH-dataTableInfo').find('.previous').addClass('symbol');$('.OH-dataTableInfo').find('.next').addClass('symbol');$(".OH-dataTable tr .order_total").each(function(){if(cmsSiteID=='de'){if($(this).find('span').length==0){$('<span> '+symbol+' </span>').insertAfter($(this).find('.currency'));}}else{if($(this).find('span').length==0){$('<span> '+symbol+' </span>').insertBefore($(this).find('.currency'));}}});}})
var matchHeight=function(){function init(){eventListeners();var width=$(window).width();if(width>767){matchHeight();contentHeight();}}
function eventListeners(){$(window).on('resize',function(){var width=$(window).width();if(width>767){matchHeight();contentHeight();}else if(width<768){}});}
function matchHeight(){var boxHeight=$('.home-link .header-box');var boxWrapHeights=[];boxHeight.css('min-height','auto');boxHeight.each(function(){boxWrapHeights.push($(this).outerHeight());});var maxHeight=Math.max.apply(null,boxWrapHeights);boxHeight.css('min-height',maxHeight);};function contentHeight(){var contentHeights=$('.header-box .sub-title');var textWrapHeights=[];contentHeights.css('min-height','auto');contentHeights.each(function(){textWrapHeights.push($(this).outerHeight());});var maxHeight=Math.max.apply(null,textWrapHeights);contentHeights.css('min-height',maxHeight);};return{init:init};}();$(document).ready(function(){matchHeight.init();});function setOrderIdInLocaStorage(){if(window.location.pathname.indexOf("/my-account/order/")>-1){var urlArr=window.location.pathname.split('/');var orderId=urlArr[urlArr.length-1];if(orderId){localStorage.setItem('selectedOrderId',orderId);}}}
function setDefaultValuesInSubmitForm(){setTimeout(function(){if(window.location.pathname.indexOf("/my-account/view-orders")>-1){if(localStorage.getItem('selectedOrderId')!==null){window.location.reload();localStorage.removeItem('selectedOrderId');}}},100);};var ACC=ACC||{};if($("#orderFormContainer").length>0){ACC.orderform={_autoload:["bindAll"],$selectedProductIdsContainer:$("#js-selected-product-ids"),$productIdsInput:$("#js-product-ids"),$enableProductIdsCheckBox:$("#js-enable-product-ids"),$productIdTagBoxTemplate:$("#product-id-tag-box-template"),$removeProductIdButton:$(".js-remove-product-id"),$advSearchButton:$(".adv_search_button"),$orderFormToggle:$(".js-show-order-form-grid-wrapper"),$searchCurrentLabel:$(".searchInput label"),$createOrderFormButton:$(".js-create-order-form-button"),$createOrderFormCheckbox:$(".js-checkbox-sku-id, .js-checkbox-base-product"),$baseProductCheckBox:$(".js-checkbox-base-product"),$skuIDCheckbox:$(".js-checkbox-sku-id"),$skuQuantityOrderInput:$(".sku-quantity"),$addToCartBtn:$('#js-add-to-cart-order-form-btn-top, #js-add-to-cart-order-form-btn-bottom'),$saveOrderFormBtn:$('#js-save-order-form-btn-top, #js-save-order-form-btn-bottom'),$saveOrderFormSubmitBtn:$('#saveCartButton'),$orderForm:$("#isCreateOrderForm"),$userQtyInputSelection:$("input[data-product-selection]"),$totalPrice:$('.js-total-price'),$totalItemsCount:$('.js-total-items-count > span'),$totalPriceValue:$('.js-total-price-value'),$advancedSearchForm:$('#advancedSearchForm'),bindAll:function(){ACC.orderform.bindToToggleProductIds(ACC.orderform.$enableProductIdsCheckBox);ACC.orderform.bindToRemoveProductId(ACC.orderform.$removeProductIdButton);ACC.orderform.bindToAdvSearchButton(ACC.orderform.$advSearchButton);ACC.orderform.bindOrderFormToggle(ACC.orderform.$orderFormToggle);ACC.orderform.bindToCreateOrderFormButton(ACC.orderform.$createOrderFormButton);ACC.orderform.bindToBaseProductCheckBox(ACC.orderform.$baseProductCheckBox);ACC.orderform.bindToSkuIDCheckBox(ACC.orderform.$skuIDCheckbox);ACC.orderform.bindAddToCartClick(ACC.orderform.$addToCartBtn);ACC.orderform.bindSaveOrderFormSubmitButtonClick(ACC.orderform.$saveOrderFormSubmitBtn);if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){ACC.orderform.replaceSearchLabel(true);ACC.orderform.appendProductIdsForSearch();}
if($("#search-create-order-form").prop("checked")){ACC.orderform.makeUserSelectionAfterPagination();ACC.orderform.setStateOrderFormButton();}else{ACC.orderform.fillQuantityValueForPagination(ACC.orderform.$userQtyInputSelection);}
ACC.orderform.$advancedSearchForm.find("input[name='CSRFToken']").remove();},bindOrderFormToggle:function(orderFormToggle){orderFormToggle.click(function(event){var $this=$(this);$(this).toggleClass('open');var orderFormGridWrapper=$(this).parents('.js-item-list-item').next('.js-order-form-grid-wrapper');orderFormGridWrapper.slideToggle("slow",function(){if(!$this.data('calc')){var scrollingContent=orderFormGridWrapper.children('#cartOrderGridForm').addClass('visible');ACC.productorderform.coreTableScrollActions(scrollingContent);$this.data('calc',true);}});});},bindToAdvSearchButton:function(advSearchButton){advSearchButton.click(function(event){if(ACC.orderform.$enableProductIdsCheckBox.prop("checked")){if(ACC.orderform.$productIdsInput.val()!=""){ACC.orderform.appendProductIdsForSearch();}
ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());}
ACC.orderform.stripOutInvalidChars();if(ACC.orderform.$orderForm.val()){sessionStorage.clear();}else{ACC.orderform.cleanupQtyInputFromSessionStorage();}});},bindToCreateOrderFormButton:function(createOrderFormButton){createOrderFormButton.click(function(event){ACC.orderform.stripOutInvalidChars();ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$orderForm.val(true);sessionStorage.removeItem("checkedProducts");ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",false);ACC.orderform.$advSearchButton.click();});},bindToBaseProductCheckBox:function(baseProductCheckBox){baseProductCheckBox.click(function(event){var baseProduct=this;$(ACC.orderform.$skuIDCheckbox).each(function(){if($(this).attr("base-product-code")&&$(this).attr("base-product-code")==baseProduct.value){$(this).prop("checked",baseProduct.checked);ACC.orderform.addProductIdsToSessionStorage(this);}})});},bindToSkuIDCheckBox:function(skuIDCheckbox){skuIDCheckbox.click(function(event){ACC.orderform.addProductIdsToSessionStorage(this);});},addToSkuQtyInput:function(_this,currentIndex){if(sessionStorage.totalItems==0){ACC.orderform.$addToCartBtn.attr('disabled','disabled');ACC.orderform.$saveOrderFormBtn.attr('disabled','disabled');}else{ACC.orderform.$addToCartBtn.removeAttr('disabled');ACC.orderform.$saveOrderFormBtn.removeAttr('disabled');}
var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var qtyInputJson=JSON.parse($(_this).attr("data-product-selection"));var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,qtyInputJson);for(var i=0;i<filteredObjects.length;i++){qtyInputs.splice(qtyInputs.indexOf(filteredObjects[i]),1);}
var currentPrice=$("input[id='productPrice["+currentIndex+"]']").val();var totalLineItemPrice=currentPrice*_this.value;qtyInputJson['basePrice']=currentPrice;qtyInputJson['totalPrice']=totalLineItemPrice;qtyInputJson['qty']=_this.value;qtyInputs.push(qtyInputJson);sessionStorage.setItem("qtyInputs",JSON.stringify(qtyInputs));ACC.orderform.setTotalItemPrice($(_this),_this.value,$(_this).siblings('.price').data('variant-price'));},setStateOrderFormButton:function(){ACC.orderform.$createOrderFormButton.attr('disabled','disabled');var checkedProducts=ACC.orderform.getProductsIdsFromSessionStorage();if(checkedProducts.length>0){ACC.orderform.$createOrderFormButton.removeAttr("disabled");}
else{ACC.orderform.$createOrderFormButton.attr('disabled','disabled');}},addProductIdsToSessionStorage:function(checkbox){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds==null||clickedProductIds==undefined){sessionStorage.setItem("checkedProducts",JSON.stringify([]))
clickedProductIds=new Array();}
var ifProductExist=clickedProductIds.indexOf(checkbox.value);if(checkbox.checked){if(ifProductExist==-1)
clickedProductIds.push(checkbox.value);}else{if(ifProductExist!=-1)
clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));console.log(sessionStorage.getItem("checkedProducts"));ACC.orderform.setStateOrderFormButton();},fetchOrPopulateSessionStorageObj:function(item){var storageObj=JSON.parse(sessionStorage.getItem(item));if(storageObj==null||storageObj==undefined){sessionStorage.setItem(item,JSON.stringify([]))
storageObj=new Array();}
return storageObj},makeUserSelectionAfterPagination:function(){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));if(clickedProductIds!=null){$(ACC.orderform.$skuIDCheckbox).each(function(){if(clickedProductIds.indexOf(this.value)!=-1)
$(this).prop("checked",true);})}},fillQuantityValueForPagination:function(userQtyInputSelection){var qtyInputs=JSON.parse(sessionStorage.getItem("qtyInputs"));var prevParentId,prevVariantLoop,parentTable={};if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(obj){var filteredObjects=ACC.orderform.filterMatchingQtyInputs(qtyInputs,JSON.parse($(this).attr('data-product-selection')));if(filteredObjects!=null&&filteredObjects.length>0){var qty=filteredObjects[0].qty;var resetSummary=false;$(this).attr('value',qty);if(this.hasAttribute('data-variant-id')){if(prevVariantLoop===$(this).parents('table').data('variant-loop')){resetSummary=true;}
ACC.productorderform.calculateVariantTotal($(this),qty);if(prevParentId===$(this).data('parent-id')&&prevVariantLoop===$(this).parents('table').data('variant-loop')){ACC.productorderform.updateSelectedVariantGridTotal(this,0,false,resetSummary);}
else{ACC.productorderform.updateSelectedVariantGridTotal(this,0,true,resetSummary);}
prevParentId=$(this).data('parent-id');parentTable=$(this).parents('table');prevVariantLoop=parentTable.data('variant-loop');}}});ACC.orderform.$addToCartBtn.removeAttr("disabled");ACC.orderform.$saveOrderFormBtn.removeAttr("disabled");}
ACC.orderform.resetPriceCounters();},getProductsIdsFromSessionStorage:function(){var clickedProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");if(clickedProductIds!=null&&clickedProductIds!=""){return clickedProductIds.join(",");}
return[];},removeProductIdFromSessionStorage:function(productId){var clickedProductIds=JSON.parse(sessionStorage.getItem("checkedProducts"));var ifProductExist=clickedProductIds.indexOf(productId);if(ifProductExist!=-1){clickedProductIds.splice(ifProductExist,1);}
sessionStorage.setItem("checkedProducts",JSON.stringify(clickedProductIds));},bindToToggleProductIds:function(addProductIdsCheckBox){addProductIdsCheckBox.on("change",function(event){var checked=$(this).prop("checked");ACC.orderform.replaceSearchLabel(checked);var joinedProductIds=$.map(ACC.orderform.$selectedProductIdsContainer.find(".product-id-tag-box .product-id"),function(index){return $(index).text()}).join(", ");if(joinedProductIds!==""){ACC.orderform.$productIdsInput.val(joinedProductIds);}
ACC.orderform.$selectedProductIdsContainer.empty();});},appendProductIdsForSearch:function(){ACC.orderform.stripOutInvalidChars();var productIds=ACC.orderform.$productIdsInput.val().split(",");productIds=$.map(productIds,function(productId,index){return($.trim(productId));});productIds=$.unique(productIds);var presentProductIds=ACC.orderform.fetchOrPopulateSessionStorageObj("checkedProducts");$.each(productIds,function(index,productId){var $existingProductId=ACC.orderform.$selectedProductIdsContainer.find("#product-id-"+productId);if(productId!==''&&$existingProductId.length==0){ACC.orderform.$productIdTagBoxTemplate.tmpl({productId:productId,index:index}).appendTo(ACC.orderform.$selectedProductIdsContainer);}
if(presentProductIds.indexOf(productId)==-1){presentProductIds.push(productId);}});sessionStorage.setItem("checkedProducts",JSON.stringify(presentProductIds));ACC.orderform.$productIdsInput.val('');ACC.orderform.$productIdsInput.focus();},bindAddToCartClick:function(addToCartBtn){addToCartBtn.click(function(){$('#loader').attr('style','display');var cmsSiteID=$("#cmsCurrentSiteID").val();if((cmsSiteID=='us'||cmsSiteID=='usmo')){$('.overlay-container').show();}
$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:'POST',dataType:'json',contentType:'application/json',data:ACC.orderform.getJSONDataForAddToCart(),success:function(response){$('#loader').attr('style','display:none');var url=ACC.config.encodedContextPath+'/search/advanced/create-order-form?saveOrderStatus=addtocartsuccess';window.location.replace(url);ACC.orderform.cleanUserQtySelection(ACC.orderform.$userQtyInputSelection);var cmsSiteID=$("#cmsCurrentSiteID").val();if((cmsSiteID=='us'||cmsSiteID=='usmo')){$('.overlay-container').hide();}},error:function(jqXHR,textStatus,errorThrown){$('#loader').attr('style','display:none');var cmsSiteID=$("#cmsCurrentSiteID").val();if((cmsSiteID=='us'||cmsSiteID=='usmo')){$('.overlay-container').hide();}
console.log("The following error occured: "+textStatus,errorThrown);}});});},bindSaveOrderFormSubmitButtonClick:function(saveOrderFormBtn){var saveOrderFormUrl=$("#saveOrderFormUrl").val();saveOrderFormBtn.click(function(){$.ajax({url:saveOrderFormUrl,type:'POST',dataType:'json',contentType:'application/json',data:ACC.orderform.getJSONDataForAddToCart(),async:false,success:function(response){if(response.status=='SUCCESS')
{var url=ACC.config.encodedContextPath+'/search/advanced/create-order-form?saveOrderStatus=success';window.location.replace(url);}
else
{var url=ACC.config.encodedContextPath+'/search/advanced/create-order-form?saveOrderStatus=error';window.location.replace(url);}
ACC.orderform.cleanUserQtySelection(ACC.orderform.$userQtyInputSelection);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});},getJSONDataForAddToCart:function(){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");var skusAsJSON=[];for(var i=0;i<qtyInputs.length;i++){if(parseInt(qtyInputs[i].qty)>0){skusAsJSON.push({"product":{"code":qtyInputs[i].product},"quantity":qtyInputs[i].qty,"basePrice":{"value":qtyInputs[i].basePrice},"totalPrice":{"value":qtyInputs[i].totalPrice}});}}
var carttotalItems=sessionStorage.totalItems;var code=$('#cartCode').val();var orderFormCode;var orderFormName=$('#saveCartName').val();;var description=$('#saveCartDescription').val();if(code&&code!=''&&code!='newcart')
{orderFormCode=code;}
var autopage=$('.js-uscode').val();return JSON.stringify({"cartEntries":skusAsJSON,"totalItemsQty":carttotalItems,"code":orderFormCode,"orderFormName":orderFormName,"description":description});},bindToRemoveProductId:function(removeProductIdButton){ACC.orderform.$selectedProductIdsContainer.on("click",removeProductIdButton,function(event){event.preventDefault();var valueToRemove=$(event.target).parents('.js-remove-product-id');ACC.orderform.removeProductIdFromSessionStorage($(valueToRemove).children('.product-id').text());$(valueToRemove).remove();ACC.orderform.$selectedProductIdsContainer.empty();ACC.orderform.$enableProductIdsCheckBox.attr("checked",true);ACC.orderform.$productIdsInput.val(ACC.orderform.getProductsIdsFromSessionStorage());ACC.orderform.$advSearchButton.click();});},cleanUserQtySelection:function(userQtyInputSelection){var qtyInputs=ACC.orderform.fetchOrPopulateSessionStorageObj("qtyInputs");if(qtyInputs!=null&&qtyInputs.length>0){userQtyInputSelection.each(function(){$(this).prop('value',0);ACC.orderform.$addToCartBtn.attr('disabled','disabled');ACC.orderform.$saveOrderFormBtn.attr('disabled','disabled');ACC.orderform.setTotalItemPrice($(this),0,0);})}
ACC.productorderform.cleanValues();ACC.productorderform.resetSelectedVariant();ACC.orderform.$totalPrice.html(ACC.productorderform.formatTotalsCurrency('0.00'));ACC.orderform.$totalItemsCount.text('0');ACC.orderform.$totalPriceValue.val(0);ACC.orderform.cleanupQtyInputFromSessionStorage();},replaceSearchLabel:function(productIdsChecked){var currentLabel=ACC.orderform.$searchCurrentLabel.html();var searchByIdsLabel=$("#searchByIdsLabel").val();var searchByKeywordLabel=$("#searchByKeywordLabel").val();if(productIdsChecked){currentLabel=currentLabel.replace(searchByKeywordLabel,searchByIdsLabel);}else{currentLabel=currentLabel.replace(searchByIdsLabel,searchByKeywordLabel);}
ACC.orderform.$searchCurrentLabel.html(currentLabel);},stripOutInvalidChars:function(){ACC.orderform.$productIdsInput.val(ACC.orderform.$productIdsInput.val().replace(/[^a-z0-9 ,.\-_]/ig,''));},cleanupQtyInputFromSessionStorage:function(){sessionStorage.removeItem("qtyInputs");sessionStorage.removeItem("totalPrice");sessionStorage.removeItem("totalPriceVal");sessionStorage.removeItem("totalItems");},resetPriceCounters:function(){ACC.orderform.$totalItemsCount.text(sessionStorage.totalItems);ACC.orderform.$totalPrice.html(sessionStorage.totalPrice||ACC.productorderform.formatTotalsCurrency('0.00'));ACC.orderform.$totalPriceValue.val(sessionStorage.totalPriceVal||0);ACC.orderform.fillTotalItemPrice();},setTotalItemPrice:function(item,quantity,price){if(!item.data('variant-id')){var htmlContent=(quantity>0)?ACC.productorderform.formatTotalsCurrency(price*quantity):'';item.parent().next('.item__total').html(htmlContent);}},fillTotalItemPrice:function(){if(sessionStorage.qtyInputs!==undefined){var qtyInputsJson=JSON.parse(sessionStorage.qtyInputs);var $product={};for(var i=0;i<qtyInputsJson.length;i++){if(qtyInputsJson[i].qty>0){$product=$('.'+qtyInputsJson[i].product);var totalPrice=ACC.productorderform.formatTotalsCurrency($product.siblings('.price').data('variant-price')*qtyInputsJson[i].qty);$product.parent().siblings('.item-total').html(totalPrice);}}}},filterMatchingQtyInputs:function(qtyInputs,dataValueObj){var filteredObjects=$.grep(qtyInputs,function(obj){return dataValueObj.product==obj.product;});return filteredObjects;}};};